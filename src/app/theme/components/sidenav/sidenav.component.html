<div class="offcanvas offcanvas-start w-75" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
	aria-labelledby="offcanvasWithBothOptionsLabel">
	<div class="offcanvas-header pb-0">
		<div class="app-title w-50">
			<ng-container *ngTemplateOutlet="appTitle || defaultTitle"></ng-container>
		</div>
		<button pButton type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
	</div>
	<div class="offcanvas-body pt-0">
		<ul id="menu-items">
			<li class="position-relative">
				<p class="px-3 fw-semibold text-small mb-2"><span class="maintext">Main</span> Menu</p>
			</li>
			@for (item of filteredMenus; track $index) {
			<li
				[ngClass]="{ 'menu-item': true, active: item.active && !item?.restricted && !item?.sameUrl, overlap: isOverlap }"
				(click)="listClick($event, item)">
				@if (item.header) {
				<div class="system-main__apps header">
					<span class="system-main__icon"><img
							src="./../../../../uniprep-assets/images/icons/tip_with_notification.svg" /></span>
					<span class="system-main__name"> {{ item.title }} </span>
				</div>
				}
				@else {
				@if(item?.subMenu){
				<div class="d-flex justify-content-between align-items-center me-2">

					<div class="fw-semibold px-3 py-1 submenutitle mr-4"
						(click)="onOpenCloseSubMenu(item, item?.accordionStatus ? 'open' : 'close')" style="cursor: pointer;">

						{{ item.title }}
						@if(item?.premium) {
						<i class="fa-solid fa-crown uniprep-secondary"></i>
						}
					</div>

					@if(item?.title != 'Support') {
					<div>
						@if(item?.accordionStatus) {
						<i class="fa-light fa-chevron-down" (click)="onOpenCloseSubMenu(item, 'open')"></i>
						}
						@else{
						<i class="fa-light fa-chevron-up" (click)="onOpenCloseSubMenu(item, 'close')"></i>
						}
					</div>
					}
				</div>
				}
				@if (!item?.subMenu) {
				<div [ngClass]="getMenuClasses(item)" class="system-main__apps" (click)="onexpand(item)"
					data-bs-dismiss="offcanvas">
					<span class="system-main__icon" title="{{ item.title }}"><i class="{{ item.image }}"></i></span>
					<span class="system-main__name"> {{ item.title }}
						@if(item?.popular) {
						<span class="badge" style="width: fit-content"
							[ngStyle]="{ 'background-color': item?.restricted ? 'var(--p-primary-900)' : 'var(--p-lime-500)'}">
							Popular
						</span>
						}
						@if(item?.mostPopular) {
						<span class="badge" style="width: fit-content; background-color: var(--p-secondary-500)">
							Most Popular
						</span>
						}
					</span>
				</div>
				}

				}
			</li>
			}
		</ul>
	</div>
</div>

<div class="app-title d-md-flex d-none">
	<ng-container *ngTemplateOutlet="appTitle || defaultTitle"></ng-container>
</div>

<ng-template #defaultTitle>
	<img src="../../../../uniprep-assets/images/uniprep-light.svg" />
</ng-template>
<div class="footer"></div>
<!-- Desktop -->
<ul id="menu-items">
	<li class="position-relative">
		<p class="px-3 fw-semibold text-small mb-2"><span class="maintext">Main</span> Menu</p>
	</li>
	@for (item of filteredMenus; track $index) {
	<li [ngClass]="{ 'menu-item': true, active: item.active && !item?.restricted && !item?.sameUrl, overlap: isOverlap }"
		(click)="listClick($event, item)">
		@if (item.header) {
		<div class="system-main__apps header">
			<span class="system-main__icon"><img
					src="./../../../../uniprep-assets/images/icons/tip_with_notification.svg" /></span>
			<span class="system-main__name"> {{ item.title }} </span>
		</div>
		}
		@else {
		@if(item?.subMenu){
		<div class="d-flex justify-content-between align-items-center me-2">

			<div class="fw-semibold px-3 py-1 submenutitle mr-4"
				(click)="onOpenCloseSubMenu(item, item?.accordionStatus ? 'open' : 'close')" style="cursor: pointer;">
				{{ item.title }}@if(item?.premium) {<i class="fa-solid fa-crown uniprep-secondary"></i>}
			</div>

			@if(item?.title != 'Support') {
			<div>
				@if(item?.accordionStatus) {
				<i class="fa-light fa-chevron-down" (click)="onOpenCloseSubMenu(item, 'open')"></i>
				}
				@else{
				<i class="fa-light fa-chevron-up" (click)="onOpenCloseSubMenu(item, 'close')"></i>
				}
			</div>
			}
		</div>
		}
		@if(!item?.subMenu) {
		<div class="system-main__apps" [ngClass]="getMenuClasses(item)" (click)="onexpand(item)">
			<span class="system-main__icon" title="{{ item.title }}"><i class="{{ item.image }}"></i></span>
			<span class="system-main__name d-flex flex-column">
				<span>{{ item.title }}</span>
				@if(item?.popular) {
				<span class="badge" style="width: fit-content"
					[ngStyle]="{'background-color': item?.restricted ? 'var(--p-primary-900)' : 'var(--p-lime-500)'}">
					Popular
				</span>
				}
				@if(item?.mostPopular) {
				<span class="badge" style="width: fit-content; background-color: var(--p-secondary-500)">
					Most Popular
				</span>
				}
			</span>
		</div>
		}
		}
	</li>
	}
</ul>