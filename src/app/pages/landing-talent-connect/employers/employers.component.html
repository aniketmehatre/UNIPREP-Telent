<!-- talent-search.component.html -->
<div class="talent-search-container">
  <div class="container-fluid p-4">
    <div class="text-center mb-5">
      <h1 class="display-1 fw-bold text-white font-sans">Looking for a career move that matters?</h1>
      <p class="display-6 lead text-white">Discover Real Opportunities. Connect with Employers.</p>
      <p style="color: orange;" class="mt-2 display-6">Take the Next Step in Your Career.</p>
    </div>

    <div class="card p-4 border shadow-lg">
      <div class="d-flex justify-content-between align-items-center mb-3" style="padding-left: 3rem;">
        <div class="text-white fs-4">Total Talents: {{ totalTalents }}</div>
        <button class="px-5 py-2 rounded-3 border-white text-white bg-gray" (click)="displayUnlockFilter = true;">Filter</button>
      </div>

      <div class="row g-3 talent-card-container">
			<div class="col-xxl-4 col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 mb-2 " *ngFor="let company of companyConnectList"  (click)="displayUnlockFilter = true;">
				<div class="card h-100 card-inside text-dark bg-white" role="button" style="transition: transform 0.3s; border: 1px solid #fda172" [style.border]="company.verified ? '1px solid #FFA500' : '1px solid #fda172'">
					<div class="card-body">
						<div class="row mb-3">
							<div class="col-3">
								<div class="w-100 h-100 border rounded-2 overflow-hidden" style="aspect-ratio: 1">
									<img (error)="$event.target.src = '/uniprep-assets/images/job.webp'" src="{{ company.company_logo }}" alt="Company Logo" style="width: 100%; object-fit: contain; height: 100%" />
								</div>
							</div>
							<div class="col-9 text-start text-dark">
								<div class="d-flex justify-content-between text-start">
									<div class="d-block">
										<h5 class="fw-bold mb-0">{{ company.company_name ? company.company_name : "Company Name" }}</h5>
										<p class="text-muted text-small">Founded: {{ (company.founded_year | date: 'yyyy')  || "2019" }}</p>
									</div>
									<a href="#" style="color: #fda172">
										<i class="fa-regular fa-share-alt fa-xl"></i>
									</a>
								</div>
								<div class="text-start">
									<button class="px-3 py-2 rounded-1 text-small btn" pButton [ngClass]="company.shortlisted == 1 ? 'active-shortlist' : 'inActive-shortlist'" (click)="onClickShortListCompany(company.id)" [disabled]="company.shortlisted == 1">
										{{ company.shortlisted == 1 ? "Shortlisted" : "Shortlist" }}
									</button>
								</div>
							</div>
						</div>
						<div class="row text-start text-dark">
							<!-- First Row -->
							<hr class="my-1" />
							<div class="col-6">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container job-icon">
										<i class="fas fa-briefcase"></i>
									</div>
									<div class="info-container" class="text-decoration-none text-dark">
										<div class="info-label">Open Jobs</div>
										<div class="info-value">{{ company.jobs }}</div>
									</div>
								</div>
							</div>

							<div class="col-6">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container vacancies-icon">
										<i class="fas fa-users"></i>
										</div>
										<div class="info-container" (click)="routerToJobListingPageWithCompanyId($event, company.id);">
										<div class="info-label">Open Vacancies</div>
										<div class="info-value">{{ company.vacancies }}</div>
									</div>
								</div>
							</div>
							<hr class="my-1" />

							<!-- Second Row -->
							<div class="col-6 mb-3">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container company-icon">
										<i class="fas fa-building"></i>
									</div>
									<div class="info-container">
										<div class="info-label">Company Type</div>
										<div class="info-value">{{ company.type }}</div>
									</div>
								</div>
							</div>

							<div class="col-6 mb-3">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container size-icon">
										<i class="fas fa-users-cog"></i>
									</div>
									<div class="info-container">
										<div class="info-label">Company Size</div>
										<div class="info-value">{{ company.size }}</div>
									</div>
								</div>
							</div>

							<!-- Third Row -->
							<div class="col-6 mb-3">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container industry-icon">
										<i class="fas fa-industry"></i>
									</div>
									<div class="info-container">
										<div class="info-label">Industry</div>
										<div class="info-value">{{ company.industry_type[1]+'+1' }}</div>
									</div>
								</div>
							</div>

							<div class="col-6 mb-3">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container location-icon">
										<i class="fas fa-map-marker-alt"></i>
									</div>
									<div class="info-container">
										<div class="info-label">Headquarters</div>
										<div class="info-value">{{ company.HQ_city }} , {{ company.HQ_country }}</div>
									</div>
								</div>
							</div>

							<!-- Fourth Row -->
							<div class="col-6">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container department-icon">
										<i class="fas fa-laptop-code"></i>
									</div>
									<div class="info-container">
										<div class="info-label">Department</div>
										<div class="info-value">{{ company.departments }}</div>
									</div>
								</div>
							</div>

							<div class="col-6">
								<div class="d-flex align-items-center gap-2">
									<div class="icon-container work-mode-icon">
										<i class="fas fa-map-pin"></i>
									</div>
									<div class="info-container">
										<div class="info-label">Work mode</div>
										<div class="info-value">{{ company.work_mode }}</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
      </div>

      <!-- Pagination -->
      <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" href="javascript:void(0)" (click)="previousPage()" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" href="javascript:void(0)" (click)="previousPage()" aria-label="Previous">
              <span aria-hidden="true">&lt;</span>
            </a>
          </li>
          <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" 
              [class.active]="currentPage === i + 1">
            <a class="page-link" href="javascript:void(0)" (click)="changePage(i + 1)">{{ i + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" href="javascript:void(0)" (click)="nextPage()" aria-label="Next">
              <span aria-hidden="true">&gt;</span>
            </a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" href="javascript:void(0)" (click)="nextPage()" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
<p-dialog [(visible)]="displayUnlockFilter" [modal]="true" [closable]="true" [dismissableMask]="true" styleClass="unlock-filter-dialog p-1"
  [style]="{ width: '500px' }" header="" [contentStyle]="{ 'text-align': 'center' }">
  
  <img src="uniprep-assets/icons/metal-lock.png" alt="lock" style="width: 100px; margin-bottom: 1rem;" />
  <div class="p-4">
      <h5 style="color: #ff6600; font-weight: bold;">Unlock Full Profile Access</h5>
      
      <p style="font-size: 14px; color: #444;" class="text-center">
        You're just one step away from discovering top talent. <br>Log in to explore complete profiles, download CVs,
        and connect directly with job-ready candidates verified by our team.
      </p>
    
      <button class="btn btn-secondary mt-3" [routerLink]="['/register']">
        Register Now
    </button>
</div>
</p-dialog>
