<div class="card readingcard" style="border-radius: 15px 15px 0px 0px !important;">
    <div class="card-body pt-0"  *ngIf="!planExpired">
        <div class="row justify-content-center">
            <div class="col-md-2 text-start"></div>
            <div class="col-md-8 text-center">
                <h5 class="select-title mb-1" tooltipPosition="top"
                    pTooltip="">
                    INVESTOR LIST
                </h5>

            </div>
            <div class="col-md-2"></div>
        </div>
        <div class="row justify-content-center desktop">
            <div class="col-md-3 col-5 text-md-start mb-3">
                <div class="p-input-icon-left w-100 mt-3">
                    <i class="pi pi-search"></i>
                    <input class="w-100 px-5 py-2" type="text" placeholder="Search Investors..." pInputText
                           [(ngModel)]="valueNearYouFilter" (input)="performSearch($event)"/>
                </div>
            </div>
            <div class="col-md-6 col-7 text-md-center text-end">
            </div>
            <div class="col-md-3 col-12 text-end justify-content-end">
                <span ><button class="btn btn-primary ps-3 pe-3 pt-2 pb-2" (click)="filterBy()"
                               style="background-color: var(--uniprep-primary);border-radius: 8px; border: aliceblue; color: #fff;"
                               type="button">
                    Filter
						by</button></span>
                <span ><button class="btn btn-danger ps-3 pe-3 pt-2 pb-2" (click)="resetFilter()"
                               style="border-radius: 8px; color: #fff;"
                               type="button">
                    Reset</button></span>
            </div>
        </div>
        <div class="mobile mt-2">
            <div class="row">
                <div class="col-12">
                    <div class="p-input-icon-left w-100 mt-3">
                        <i class="pi pi-search"></i>
                        <input class="w-100 px-5 py-2" type="text" placeholder="Search Investors..." pInputText [(ngModel)]="valueNearYouFilter"
                            (input)="performSearch($event)" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 mt-2">
                        <button class="btn w-100 btn-primary ps-3 pe-3 pt-2 pb-2" (click)="filterBy()"
                            style="background-color: var(--uniprep-primary);border-radius: 8px; border: aliceblue; color: #fff;"
                            type="button">
                            Filter
                            by</button>
                    </div>
                    <div class="col-6 mt-2">
                        <button class="btn w-100 btn-danger ps-3 pe-3 pt-2 pb-2" (click)="resetFilter()"
                            style="border-radius: 8px; color: #fff;" type="button">
                            Reset</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- upcomming event -->
        <p-table #table [value]="investorData" class="primary-header" styleClass="primary-header" [paginator]="false" (onPage)="pageChange($event)"
                 [totalRecords]="totalInvestorsCount" [rows]="pageSize" [rowsPerPageOptions]="[500, 300, 100]" responsiveLayout="scroll">
            <ng-template pTemplate="caption">
                <div class="d-flex w-full align-items-end justify-content-end desktop">
                    <div class="pe-2">
                        <span class="text-muted text-small">Total Investors : {{ totalInvestorsCount }}</span>
                    </div>
                    <div class="ps-2">
                    </div>
                </div>
                <div class="text-center mobile">
                    <div class="pe-2">
                        <span class="text-muted text-small">Total Investors : {{ totalInvestorsCount }}</span>
                    </div>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr class="investor-list-table-header">
                    <th class="border-cell">Investor Name</th>
                    <th class="border-cell">Country</th>
                    <th class="border-cell">Headquarters</th>
                    <th class="border-cell">Investor Type</th>
                    <!-- <th class="border-cell">Industry Interested</th> -->
                    <th class="border-cell">Link</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-inv let-expanded="expanded">
                <tr class="investor-list-table-header">
                    <td class="border-cell">{{inv.org_name}}</td>
                    <td class="border-cell">{{inv.country}}</td>
                    <td class="border-cell">{{inv.head_quarters}}</td>
                    <td class="border-cell">{{inv.investor_type}}</td>
                    <!-- <td class="border-cell">{{inv.industry_interested}}</td> -->
                    <td class="border-cell" style="white-space: nowrap;">
                        <div *ngIf="inv.linked_in && inv.linked_in.trim() !== ''">
                            <i class="fa-brands fa-linkedin"></i>&nbsp;<a target="_blank" href="{{inv.linked_in}}">Linked In</a><br>
                        </div>
                        
                        <div *ngIf="inv.website && inv.website.trim() !== ''">
                            <i class="fa-solid fa-globe"></i>&nbsp;<a target="_blank" href="{{inv.website}}">Website</a><br>
                        </div>

                        <div *ngIf="inv.email && inv.email.trim() !== ''">
                            <i class="fa-solid fa-envelope"></i>&nbsp;<a href="mailto:{{inv.email}}">Email</a><br>
                        </div>
                        
                        
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <p-paginator [rows]="pageSize" [totalRecords]="totalInvestorsCount" (onPageChange)="pageChange($event)" [first]="page"
                     [rowsPerPageOptions]="[500, 300, 100]"></p-paginator>
    </div>

    <div *ngIf="planExpired" class="investor-expired">
        <div class="row justify-content-center">
            <div class="col-md-2 text-start"></div>
            <div class="col-md-8 text-center">
                <h5 class="select-title mb-1" tooltipPosition="top" pTooltip="">
                    INVESTOR LIST
                </h5>
        
            </div>
            <div class="col-md-2"></div>
        </div>
        <div class="text-center mt-5 mb-4">
            <img src="../../../uniprep-assets/images/smartloack.png" class="image" width="80">
            <h3>Upgrade now to access invaluable tools</h3>
            <p>Unlock the power of success with our exclusive investor list!<br> Upgrade your plan now to gain instant access.</p>
            <p class="offer">Investor list offers:<br>Information of over 1,00,000 investors including details about the company name, investor type,
            contact details and much more!</p>
            <button pButton type="button" class=" text-white p-ripple p-button-rounded p-button-warning p-button p-component p-2"
                (click)="upgradePlan()">Upgrade Plan<i class="fa fa-arrow-right exhausted-plan-icon"></i></button>
        </div>
    </div>

</div>

<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{ display: isFilterVisible }">
    <div class="modal-dialog" role="document">
        <form role="form" [formGroup]="filterForm" (ngSubmit)="loadInvestorData()">
            <div class="modal-content" style="margin-top: 50% !important">
                <div class="modal-header flex justify-content-between">
                    <h4 class="modal-title">Filter Investor</h4>
                    <span style="cursor: pointer;color: #3f4c83;"><i (click)="closePopup()" class="fa-solid fa-circle-xmark fa-2x"></i></span>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="form-label" style="font-size: medium;font-weight:500">Filter by
                                        Investor Name</label>
                                    <div class="form-group">
                                        <div class="mb-3">
                                            <input placeholder="Investor Name" type="text" formControlName="org_name"
                                                   class="form-control border-black paddingfive" />
                                            <div *ngIf="filterForm.hasError('org_name')" class="text-danger">
                                                {{ filterForm.getError('org_name') }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="col-md-6">
                                    <label class="form-label" style="font-size: medium;font-weight:500">Filter by
                                        Org. Type</label>
                                    <div class="form-group">
                                        <div class="mb-3">
                                            <p-multiSelect [options]="investorOrgType" styleClass="w-100"
                                                           formControlName="org_type"
                                                           optionValue="id"
                                                           defaultLabel="Select Org. Type"
                                                           optionLabel="org_type_name" #OrgTypeMultiSelect>
                                                <ng-template pTemplate="selectedItems">
                                                    {{ OrgTypeMultiSelect.defaultLabel  }}
                                                </ng-template>
                                            </p-multiSelect>
                                        </div>
                                    </div> 
                                </div>-->
                                <div class="col-md-6">
                                    <label class="form-label" style="font-size: medium;font-weight:500">Filter by
                                        Country</label>
                                    <div class="form-group">
                                        <div class="mb-3">
                                            <p-multiSelect [options]="countryList" styleClass="w-100"
                                                           formControlName="country"
                                                           optionValue="id"
                                                           defaultLabel="Select Country"
                                                           optionLabel="country" #InvestorCountryMultiSelect>
                                                <ng-template pTemplate="selectedItems">
                                                    {{ InvestorCountryMultiSelect.defaultLabel }}
                                                </ng-template>
                                            </p-multiSelect>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label" style="font-size: medium;font-weight:500">Filter by
                                        Headquarters</label>
                                    <div class="form-group">
                                        <div class="mb-3">
                                        <p-multiSelect [options]="headQuartersList" styleClass="w-100"
                                                       formControlName="head_quarters"
                                                       defaultLabel="Select Head Quarters"
                                                       optionValue="id"
                                                       optionLabel="head_quarters_name" #InvestorHeadQuartersMultiSelect>
                                            <ng-template pTemplate="selectedItems">
                                                            {{ InvestorHeadQuartersMultiSelect.defaultLabel }}
                                            </ng-template>
                                        </p-multiSelect>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label" style="font-size: medium;font-weight:500">Filter by
                                        Investor Type</label>
                                    <div class="form-group">
                                        <div class="mb-3">
                                            <p-multiSelect [options]="investorType" styleClass="w-100"
                                                           formControlName="investor_type"
                                                           optionValue="id"
                                                           defaultLabel="Select Investor Type"
                                                           optionLabel="investor_type_name" #InvestorTypeMultiSelect>
                                                <ng-template pTemplate="selectedItems">
                                                    {{ InvestorTypeMultiSelect.defaultLabel }}
                                                </ng-template>
                                            </p-multiSelect>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="col-md-6">
                                    <label class="form-label" style="font-size: medium;font-weight:500">Filter by
                                        Industry</label>
                                    <div class="form-group">
                                        <div class="mb-3">
                                            <p-multiSelect [options]="investorIndustryInterested" styleClass="w-100"
                                                           formControlName="industry_interested"
                                                           optionValue="id"
                                                           defaultLabel="Select Industry Interested"
                                                           optionLabel="industry_name" #InvestorIndustryInterested>
                                                <ng-template pTemplate="selectedItems">
                                                    {{ InvestorIndustryInterested.defaultLabel }}
                                                </ng-template>
                                            </p-multiSelect>
                                        </div>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <span style="float: right">
						<button type="submit" class="btn btn-dark"
                                style="background-color: var(--uniprep-primary) !important">Apply Filter</button>
					</span>

                </div>
            </div>
        </form>
    </div>
</div>
