<div class="card readingcard">
	<div class="card-header border-0 bg-transparent">
		<div class="row justify-content-center">
			<div class="col-md-12 text-center">
				<h5 class="select-title" tooltipPosition="top" pTooltip="View and download the user guide">USER GUIDE</h5>
			</div>
		</div>
	</div>
	<div class="card-body text-center flex-fill overflow-y-auto">
		<div class="row justify-content-center h-100">
			<div class="col-md-12">
				<div *ngIf="isLoading" class="d-flex justify-content-center align-items-center h-100">
					<div class="spinner-border text-primary" role="status">
						<span class="visually-hidden">Loading...</span>
					</div>
				</div>

				<div class="d-flex h-100" *ngIf="!isLoading && !isIos && !pdfLoadError">
					<ng2-pdfjs-viewer #pdfViewer
						[pdfSrc]="pdfUrl"
						[viewerId]="'pdf-viewer'"
						[downloadFileName]="'user-guide.pdf'"
						[externalWindow]="false"
						[openFile]="false"
						[viewBookmark]="false"
						[download]="true"
						[fullScreen]="true"
						[find]="true"
						[zoom]="'page-width'"
						[print]="true"
						[startPage]="1"
						style="width: 100%; height: 100vh"
						(error)="onError($event)">
					</ng2-pdfjs-viewer>
				</div>

				<div class="d-flex h-100" *ngIf="!isLoading && isIos && !pdfLoadError">
					<ng2-pdfjs-viewer 
						[pdfSrc]="pdfUrl" 
						id="pdfIframe1" 
						class="userguide" 
						width="100%" 
						height="100%" 
						zoom="100%"
						(error)="onError($event)">
					</ng2-pdfjs-viewer>
				</div>

				<div *ngIf="pdfLoadError" class="alert alert-danger mt-3">
					<p>Error loading PDF. Please try downloading the file instead.</p>
					<button pButton 
						class="p-button-primary mt-2" 
						(click)="downloadPdf()"
						icon="pi pi-download" 
						label="Download PDF">
					</button>
				</div>
			</div>
		</div>
	</div>
</div>

<p-toast></p-toast>
