<div class="card readingcard">
	<div class="card-header border-0 bg-transparent">
		<div class="row">
			<div class="col d-flex flex-md-row flex-column gap-2 justify-content-center text-center">
				<div *ngIf="this.currentModuleId == 5 || 1 || 7 || 3 || 4 || 10">
					<span
						*ngIf="this.currentModuleId == 10 || this.currentModuleId == 1 || this.currentModuleId == 7 || this.currentModuleId == 3 || this.currentModuleId == 4 || this.currentModuleId == 5">
						<div class="backIcon d-md-flex d-none" (click)="goBackNew()" role="button">
							<span class="fa-solid fa-chevron-left" (click)="goBackNew()"></span>
						</div>
					</span>
					<span *ngIf="this.currentModuleId == 8 && this.canShowQuestionList">
						<div class="backIcon d-md-flex d-none" (click)="goBack()" role="button">
							<span class="fa-solid fa-chevron-left" (click)="goBack()"></span>
						</div>
					</span>
					<div class="p-input-icon-left search-container mt-2" *ngIf="currentModuleId != 8">
						<div *ngIf="filteredData.length" class="dropdown-container">
							<div *ngFor="let result of filteredData" role="button" class="dropdown-item"
								(click)="selectSearchResult(result)">
								<h3>{{ result.title }}</h3>
								<p>{{ result.subtitle }}</p>
							</div>
						</div>
					</div>
				</div>
				<div class="select-title d-flex justify-content-between align-items-center">
					<div class="d-flex gap-2">
						<h5 routerLink="/pages/dashboard" role="button" class="mb-0" tooltipPosition="top" pTooltip="">
							<i class="fa-regular fa-home"></i>
						</h5>
						<span><i class="fa-solid fa-chevron-right"></i></span>
						<h5 *ngIf="currentModuleId !== 8 && currentModuleId != 10" routerLink="/pages/global-repo"
							role="button" class="mb-0" tooltipPosition="top" pTooltip="">Global Repository</h5>
						<span *ngIf="currentModuleId !== 8 && currentModuleId != 10"><i
								class="fa-solid fa-chevron-right"></i></span>
						<h5 role="button" class="mb-0" tooltipPosition="top" pTooltip="">{{ currentModuleName |
							uppercase }} {{ selectSubmoduleName ? " > " + selectSubmoduleName : "" }}</h5>
					</div>
					<div>
						<button pButton class="how-it-works-button" severity="warn"
							(click)="openVideoPopup(howItWorksVideoLink)">How it works?<i
								class="fa-solid fa-play d-md-block d-none"></i></button>
					</div>
				</div>
				<div class="flex-shrink-0 gap-2 justify-content-center align-items-center d-flex"
					*ngIf="currentModuleId != 8 && currentModuleId != 10 && currentModuleId != 11 && currentModuleId != 14 && currentModuleId != 7 && currentModuleId != 5">
					<button pButton pButton role="button" (click)="startQuiz()" class="m-0 btn btn-secondary p-3"
						[disabled]="quizpercentage >= 90">
						<p class="mb-0"><i class="fa-regular fa-lightbulb-on" style="font-size: 0.9rem"> </i> Start Quiz
						</p>
					</button>
				</div>
				<div class="flex-shrink-0 align-items-center d-flex position-relative" *ngIf="currentModuleId == 8">
					<p-inputgroup>
						<p-inputgroup-addon>
							<i class="fa-solid fa-search"></i>
						</p-inputgroup-addon>
						<input *ngIf="currentModuleId == 8" type="text" placeholder="Look for you specialization"
							pInputText [(ngModel)]="searchLearning" (input)="performSearch()" />
					</p-inputgroup>
					<div *ngIf="filteredData.length" class="dropdown-container text-start">
						<div *ngFor="let result of filteredData" class="dropdown-item" role="button"
							(click)="takeMeToQuestion(result)">
							<div role="button">
								<h3>{{ result.title }}</h3>
								<p>{{ result.subtitle }}</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="card-body text-center flex-fill overflow-y-auto">
		<div class="row overflow-hidden h-100" *ngIf="isSkeletonVisible">
			<div *ngFor="let index of loopRange" class="col-lg-2 col-md-3 col-sm-4 col-xs-12 col-12">
				<div class="card my-2">
					<div class="card-body">
						<div class="row justify-content-center align-items-center">
							<div class="col-3 col-md-12 d-flex justify-content-center">
								<p-skeleton width="5rem" height="5rem" styleClass="mb-2"></p-skeleton>
							</div>
							<div class="col-9 col-md-12">
								<p-skeleton width="100%" styleClass="mb-2"></p-skeleton>
								<p-skeleton width="100%"></p-skeleton>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row mb-0" *ngIf="!isSkeletonVisible">
			<div *ngFor="let sub of subModuleList" class="col-lg-2 col-md-3 col-sm-4 col-xs-12 col-12 mb-3">
				<div class="row w-100 m-0 justify-content-center h-100">
					<div (click)="onSubModuleClick(sub.submodule_id, sub)" class="card subjectcard position-relative"
						role="button">
<!--						<div *ngIf="sub.is_assessment && authService._user?.student_type_id == 2" class="assessment-tag"-->
<!--							style="background-color: var(&#45;&#45;uniprep-skyblue)">Assessment</div>-->
						<div
							class="card-body d-flex flex-md-column flex-row justify-content-md-between align-items-center">
							<div>
								<div class="submoduleicon mt-2">
									<img loading="lazy"
										(error)="$event.target.src = '/uniprep-assets/images/placeholder.webp'"
										alt="{{ sub.category == null ? sub.submodule_name : sub.category }}"
										class="selectimage" src="{{ sub.icon }}" />
								</div>
								<h5 class="text-center mt-3 fw-bold d-md-block d-none mb-0">{{ sub.category == null ?
									sub.submodule_name : sub.category }}</h5>
							</div>
							<div class="text-start text-md-center">
								<h5 class="subjecttitle fw-bold d-md-none d-block">{{ sub.category == null ?
									sub.submodule_name : sub.category }}</h5>
								<p class="mb-0 sub-data" *ngIf="this.currentModuleId != 8">{{ sub.questioncount }}
									Question Answered</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<p-dialog class="quizmodal" header="Header" footer="Footer" [draggable]="false"  [(visible)]="isStartQuiz"
	[style]="{ width: '70vw' }" [breakpoints]="{ '960px': '75vw', '959px': '80vw', '425px': '90vw' }" [closable]="false">
	<ng-template pTemplate="header">
		<div class="container-fluid py-3 mb-2 cb-bottom">
			<div class="row justify-content-center">
				<div class="col-md-8 d-flex align-items-center text-start">
					<h4 class="text-left font-secondarycolor mb-0">{{ currentModuleName }} Quiz</h4>
				</div>
				<div class="col-md-4 d-flex text-end">
					<div class="w-100 me-3 quizprogress">
						<span class="font-secondarycolor fw-semibold">Progress:{{ (selectedQuiz / quizData.length) * 100
							| number : "1.0-0" }} % Completed</span>
						<p-progressBar
							[value]="(selectedQuiz / quizData.length) * 100 | number : '1.0-0'"></p-progressBar>
					</div>
					<div>
						<button pButton (click)="closeQuiz()" class="btn btn-quit btn-rounded m-0 px-2 py-2">
							<div class="d-flex align-items-center">
								<span class="fw-normal h6 mb-0 ps-3 pe-2">Quit</span>
								<div class="btn-icon"><i class="fa-solid fa-power-off"></i></div>
							</div>
						</button>
					</div>
				</div>
			</div>
		</div>
	</ng-template>

	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12">
				<h6 class="text-muted">{{ selectedQuiz }}/{{ quizData.length }} Question Left</h6>
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="col-md-12">
				<p-carousel #carouselQuiz (onPage)="setPage($event)" [circular]="true" [numScroll]="1" [numVisible]="1"
					[page]="selectedQuiz - 1" [responsiveOptions]="responsiveOptions" [value]="quizData"
					class="text-center">
					<ng-template [ngForOf]="quizData" let-i="index" let-val ngFor pTemplate="item">
						<div class="row text-center">
							<div class="col-12 mt-3 mb-4">
								<p class="text-start mb-0 fw-medium text-small font-primarycolor">Question Number {{
									selectedQuiz }}</p>
								<h4 class="font-secondarycolor text-start pt-2 pb-2 text-capitalize">{{ val.question }}
								</h4>
								<div class="py-1">
									<input type="radio" value="{{ val.option1 }}" id="{{ val.otp1 }}" class="btn-check"
										name="options" autocomplete="off" />
									<label (click)="selectAnswer(val.option1, val, 1)"
										class="{{ 1 === val.user_answered ? 'optionanswered' : 'optionnotanswered' }} text-start quiznotanswered w-100 m-0"
										for="{{ val.otp1 }}">
										<h6 class="py-2 px-2 mb-0">
											<i
												class="{{ 1 === val.user_answered ? 'fa-sharp fa-solid fa-circle-check' : 'fa-regular fa-circle' }} pe-2"></i>
											{{ val.option1 }}
										</h6>
									</label>
								</div>
								<div class="py-1">
									<input type="radio" value="{{ val.option2 }}" id="{{ val.otp2 }}" class="btn-check"
										name="options" autocomplete="off" />
									<label (click)="selectAnswer(val.option2, val, 2)" class="{{ 2 === val.user_answered ? 'optionanswered' : 'optionnotansweredy' }}
                                                    text-start quiznotanswered w-100 m-0" for="{{ val.otp2 }}">
										<h6 class="py-2 px-2 mb-0">
											<i
												class="{{ 2 === val.user_answered ? 'fa-sharp fa-solid fa-circle-check' : 'fa-regular fa-circle' }} pe-2"></i>
											{{ val.option2 }}
										</h6>
									</label>
								</div>
								<div class="py-1">
									<input type="radio" value="{{ val.option3 }}" id="{{ val.otp3 }}" class="btn-check"
										name="options" autocomplete="off" />
									<label (click)="selectAnswer(val.option3, val, 3)"
										class="{{ 3 === val.user_answered ? 'optionanswered' : 'optionnotanswered' }} text-start quiznotanswered w-100 m-0"
										for="{{ val.otp3 }}">
										<h6 class="py-2 px-2 mb-0">
											<i
												class="{{ 3 === val.user_answered ? 'fa-sharp fa-solid fa-circle-check' : 'fa-regular fa-circle' }} pe-2"></i>
											{{ val.option3 }}
										</h6>
									</label>
								</div>
								<div class="py-1">
									<input type="radio" value="{{ val.option4 }}" id="{{ val.otp4 }}" class="btn-check"
										name="options" autocomplete="off" />
									<label (click)="selectAnswer(val.option4, val, 4)"
										class="{{ 4 === val.user_answered ? 'optionanswered' : 'optionnotanswered' }} text-start quiznotanswered w-100 m-0"
										for="{{ val.otp4 }}">
										<h6 class="py-2 px-2 mb-0">
											<i
												class="{{ 4 === val.user_answered ? 'fa-sharp fa-solid fa-circle-check' : 'fa-regular fa-circle' }} pe-2"></i>
											{{ val.option4 }}
										</h6>
									</label>
								</div>
							</div>
						</div>
					</ng-template>
				</p-carousel>
			</div>
		</div>
	</div>
	<ng-template pTemplate="footer">
		<div class="container-fluid py-3 mt-2 cb-top">
			<div class="row justify-content-center">
				<div class="col-md-6 text-start">
					<p class="mb-0 fw-semibold">Reference</p>
					<p-breadcrumb [model]="breadCrumb" class="max-w-100 quizreference"></p-breadcrumb>
				</div>
				<div class="col-md-6 text-end">
					<button pButton (click)="clickPreviousQuiz(carouselQuiz, $event)" *ngIf="selectedQuiz != 1"
						class="btn btn-back btn-rounded me-3 px-2 py-2">
						<div class="d-flex align-items-center">
							<span class="fw-normal h6 mb-0 ps-3 pe-2">Previous</span>
							<div class="btn-icon"><i class="fa-solid fa-arrow-left"></i></div>
						</div>
					</button>
					<button pButton *ngIf="this.quizData.length > this.selectedQuiz" [disabled]="answerOptionClicked"
						(click)="clickNextQuiz(carouselQuiz, $event)" class="btn btn-start btn-rounded m-0 px-2 py-2">
						<div class="d-flex align-items-center">
							<span class="fw-normal h6 mb-0 ps-3 pe-2">Next</span>
							<div class="btn-icon"><i class="fa-solid fa-arrow-right"></i></div>
						</div>
					</button>
					<button pButton *ngIf="this.quizData.length <= this.selectedQuiz" (click)="clickSubmitQuiz()"
						class="btn btn-start btn-rounded m-0 px-2 py-2">
						<div class="d-flex align-items-center">
							<span class="fw-normal h6 mb-0 ps-3 pe-2">Submit</span>
							<div class="btn-icon"><i class="fa-solid fa-check"></i></div>
						</div>
					</button>
				</div>
			</div>
		</div>
	</ng-template>
</p-dialog>
<p-dialog class="retrypopup" [closable]="false"  header="Header" footer="Footer"
	[(visible)]="isQuizSubmit" [style]="{ width: '60vw' }" [breakpoints]="{ '960px': '75vw', '959px': '80vw', '425px': '90vw' }" [draggable]="false"
	[resizable]="false">
	<ng-template pTemplate="header">
		<div class="container-fluid py-3 mb-2 cb-bottom">
			<div class="row justify-content-center">
				<div class="col-md-8 d-flex align-items-center text-start">
					<h4 class="text-left font-secondarycolor mb-0">{{ currentModuleName }} Quiz</h4>
				</div>
				<div class="col-md-4 d-flex text-end">
					<div class="w-100 me-3 quizprogress">
						<span class="font-secondarycolor fw-semibold">Progress:100% Completed</span>
						<p-progressBar [value]="100"></p-progressBar>
					</div>
					<div>
						<button pButton (click)="closeAllHome()" class="btn btn-start btn-rounded m-0 px-2 py-2">
							<div class="d-flex align-items-center">
								<span class="fw-normal h6 mb-0 ps-3 pe-2">Home</span>
								<div class="btn-icon"><i class="fa-solid fa-home"></i></div>
							</div>
						</button>
					</div>
				</div>
			</div>
		</div>
	</ng-template>
	<div class="container-fluid bg-white">
		<div class="row">
			<div class="col-md-12 text-center">
				<img class="pb-2" src="/uniprep-assets/images/icons/quizcomplete.webp" alt="retry" />
				<p class="text-center mb-2 fw-medium">You have completed {{ totalPercentage | number : "1.0-0" }} % of
					{{ currentModuleName }} module<br />To Claim your certificate please complete the pending modules
				</p>
				<h4 class="text-center mb-3 fw-semibold">{{ answeredCorrect }} /{{ quizData.length != 0 ?
					quizData.length : 0 }} = {{ percentageValue }}</h4>
			</div>
			<div class="text-center">
				<button pButton (click)="retryQuiz()" class="btn btn-quit btn-rounded me-2 px-2 py-2">
					<div class="d-flex align-items-center">
						<span class="fw-normal h6 mb-0 ps-3 pe-2">Retry</span>
						<div class="btn-icon"><i class="fa-solid fa-arrow-rotate-right"></i></div>
					</div>
				</button>
				<button pButton (click)="openReviewPopup()" class="btn btn-back btn-rounded m-0 px-2 py-2">
					<div class="d-flex align-items-center">
						<span class="fw-normal h6 mb-0 ps-3 pe-2">Review</span>
						<div class="btn-icon"><i class="fa-solid fa-list-check"></i></div>
					</div>
				</button>
			</div>
		</div>
	</div>
	<ng-template pTemplate="footer">
		<div class="container py-3 mt-2 cb-top">
			<div class="row justify-content-center">
				<div class="col-md-12 text-center">
					<button pButton (click)="nextModule()" class="btn btn-start btn-rounded m-0 px-2 py-2">
						<div class="d-flex align-items-center">
							<span class="fw-normal h6 mb-0 ps-3 pe-2">Next Module</span>
							<div class="btn-icon"><i class="fa-solid fa-arrow-right"></i></div>
						</div>
					</button>
				</div>
			</div>
		</div>
	</ng-template>
</p-dialog>

<p-dialog class="retrypopup"  [closable]="false" header="Header" footer="Footer"
	[(visible)]="isInstructionVisible" [style]="{ width: '60vw' }" [breakpoints]="{ '960px': '75vw', '959px': '80vw', '425px': '90vw' }"
	[draggable]="false" [resizable]="false">
	<ng-template pTemplate="header">
		<div class="container-fluid py-3 mb-2 cb-bottom">
			<div class="row justify-content-center">
				<div class="col-md-6 d-flex align-items-center text-start">
					<h4 class="text-left font-secondarycolor mb-0">Quiz Instruction</h4>
				</div>
				<div class="col-md-6 text-end">
					<button pButton (click)="closeAllHome()" class="btn btn-quit btn-rounded m-0 px-2 py-2">
						<div class="d-flex align-items-center">
							<span class="fw-normal h6 mb-0 ps-3 pe-2">Quit</span>
							<div class="btn-icon"><i class="fa-solid fa-power-off"></i></div>
						</div>
					</button>
				</div>
			</div>
		</div>
	</ng-template>
	<div class="container-fluid bg-white">
		<div class="row">
			<div class="col-md-12">
				<h6 class="text-muted pb-4">{{ quizData.length }}/{{ quizData.length }} Questions</h6>
			</div>
			<div class="col-md-12">
				<ul class="font-secondarycolor fw-medium lh-lg">
					<li>There are {{ quizData.length }} MCQs in the quiz.</li>
					<li>You can not skip any question / All question are mandatory to answer.</li>
					<li>You can not access the other screens while taking the quiz.</li>
					<li>You cannot save and submit later.</li>
					<li>Restart - will display new set of questions.</li>
					<li>You will get a certificate for completing all the quiz modules.</li>
					<li>Buffer? To qualify for the quiz you need to get __% correct.</li>
					<li>There is no time limit.</li>
				</ul>
			</div>
		</div>
	</div>
	<ng-template pTemplate="footer">
		<div class="container py-3 mt-2 cb-top">
			<div class="row justify-content-center">
				<div class="col-md-6 d-flex align-items-center text-start">
					<h4 class="font-primarycolor">ALL THE BEST!</h4>
				</div>
				<div class="col-md-6 text-end">
					<button pButton (click)="runQuiz()" class="btn btn-start btn-rounded m-0 px-2 py-2"
						[disabled]="!this.quizData">
						<div class="d-flex align-items-center">
							<span class="fw-normal h6 mb-0 ps-3 pe-2">Start</span>
							<div class="btn-icon"><i class="fa-solid fa-arrow-right"></i></div>
						</div>
					</button>
				</div>
			</div>
		</div>
	</ng-template>
</p-dialog>

<p-dialog class="questionmodal" header="Header" [draggable]="false"  [(visible)]="isReviewVisible"
	[style]="{ width: '70vw' }" [breakpoints]="{ '960px': '75vw', '959px': '80vw', '425px': '90vw' }">
	<ng-template class="p-2" pTemplate="header">
		<h5 class="select-title text-center mb-3">Review Quiz</h5>
	</ng-template>
	<div class="container-fluid">
		<div class="row justify-content-center">
			<div class="col-md-8">
				<div class="row">
					<div class="col-md-6" *ngFor="let val of quizData">
						<div class="card px-3 py-2 my-2">
							<!--                                <div class="select-title margin-minus text-center"><h5>Question</h5>-->
							<!--                                </div>-->
							<h5 class="font-secondarycolor text-start pt-2 pb-3 text-capitalize">
								{{ val.question }}
							</h5>
							<div class="py-2">
								<input type="radio" value="{{ val.option1 }}" id="{{ val.otp1 }}" class="btn-check"
									name="options" autocomplete="off" [disabled]="true" />
								<label class="{{ 1 === val.answer ? 'optionreviewcorrect' : 1 === val.user_answered ? 'optionreviewwrong' : 'optionnotanswered' }} quiznotanswered
                                                 text-start  w-100 m-0" for="{{ val.otp1 }}" disabled="true">
									<h6 class="py-2 mb-0">{{ val.option1 }}</h6>
								</label>
							</div>
							<div class="py-2">
								<input type="radio" value="{{ val.option2 }}" id="{{ val.otp2 }}" class="btn-check"
									name="options" autocomplete="off" [disabled]="true" />
								<label class="{{ 2 === val.answer ? 'optionreviewcorrect' : 2 === val.user_answered ? 'optionreviewwrong' : 'optionnotanswered' }} quiznotanswered
                                                  text-start  w-100 m-0" for="{{ val.otp2 }}">
									<h6 class="py-2 mb-0">{{ val.option2 }}</h6>
								</label>
							</div>
							<div class="py-2">
								<input type="radio" value="{{ val.option3 }}" id="{{ val.otp3 }}" class="btn-check"
									name="options" autocomplete="off" [disabled]="true" />
								<label class="{{ 3 === val.answer ? 'optionreviewcorrect' : 3 === val.user_answered ? 'optionreviewwrong' : 'optionnotanswered' }} quiznotanswered
                                                 text-start  w-100 m-0" for="{{ val.otp3 }}">
									<h6 class="py-2 mb-0">{{ val.option3 }}</h6>
								</label>
							</div>
							<div class="py-2">
								<input type="radio" value="{{ val.option4 }}" id="{{ val.otp4 }}" class="btn-check"
									name="options" autocomplete="off" [disabled]="true" />
								<label
									class="{{ 4 === val.answer ? 'optionreviewcorrect' : 4 === val.user_answered ? 'optionreviewwrong' : 'optionnotanswered' }} quiznotanswered text-start  w-100 m-0"
									for="{{ val.otp4 }}">
									<h6 class="py-2 mb-0">{{ val.option4 }}</h6>
								</label>
							</div>
						</div>
					</div>
					<!--                </p-carousel>-->
				</div>
			</div>
		</div>
	</div>
	<ng-template pTemplate="footer">
		<div class="container-fluid">
			<div class="row gap-2 justify-content-end mb-4">
				<!--                    <button pButton  (click)="clickPreviousQuiz(carouselQuiz, $event)"-->
				<!--                            class="btn btn-lg rounded-pill btn-tertiary m-0 px-2 py-2">-->
				<!--                        <p class="mb-0 px-2">Previous <i class="fa-solid fa-circle-arrow-left"></i></p>-->
				<!--                    </button>-->
				<!--                    <button pButton  *ngIf="this.quizData.length > this.selectedQuiz" (click)="clickNextQuiz(carouselQuiz, $event)"-->
				<!--                            class="btn btn-lg rounded-pill btn-secondary m-0 px-2 py-2">-->
				<!--                        <p class="mb-0 px-2"> Next <i class="fa-solid fa-circle-arrow-right"></i></p>-->
				<!--                    </button>-->
				<button pButton (click)="retryQuiz()" class="btn btn-quit btn-rounded me-2 px-2 py-2">
					<div class="d-flex align-items-center">
						<span class="fw-normal h6 mb-0 ps-3 pe-2">Retry</span>
						<div class="btn-icon"><i class="fa-solid fa-arrow-rotate-right"></i></div>
					</div>
				</button>
			</div>
		</div>
	</ng-template>
</p-dialog>