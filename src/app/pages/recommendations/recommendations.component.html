<div class="card readingcard bg-white">
	<div class="card-body d-flex flex-column justify-content-between pt-0">
		<div class="row justify-content-center">
			<div class="col-md-2 text-start"></div>
			<div class="col-md-8 text-center">
				<h5 class="select-title mb-1" tooltipPosition="top" pTooltip="Recommendations">RECOMMENDATIONS<i class="questiontooltip fa-solid fa-circle-question"></i></h5>
			</div>
			<div class="col-md-2"></div>
		</div>
		<div class="container">
			<p-carousel [value]="products" [numVisible]="1" [numScroll]="1" [circular]="false" [showNavigators]="false" [showIndicators]="false" [page]="activePageIndex" *ngIf="!enableModule">
				<ng-template let-product let-i="index" pTemplate="item">
					<div class="product-item">
						<div class="product-item-content">
							<div class="p-mb-3"></div>
							<div class="text-center">
								<p class="question-number p-2">Question Number {{ product.id }}</p>
								<h4 class="p-mb-1 question p-2">{{ product.question }}</h4>
							</div>
							<div class="check-list">
								<div class="flex align-items-center b-1">
									<p-radioButton id="yes_{{ product.id }}" [ngClass]="{ 'ng-invalid ng-dirty': invalidClass === true }" name="selection_{{ product.id }}" [value]="true" (onClick)="onClickRadioButton()" [(ngModel)]="selectedData[product.id]"> </p-radioButton>
									<label for="yes_{{ product.id }}">&nbsp;&nbsp;Yes</label>
								</div>
								<div class="flex align-items-center b-1">
									<p-radioButton id="no_{{ product.id }}" [ngClass]="{ 'ng-invalid ng-dirty': invalidClass === true }" (onClick)="onClickRadioButton()" name="selection_{{ product.id }}" [value]="false" [(ngModel)]="selectedData[product.id]"> </p-radioButton>
									<label for="no_{{ product.id }}">&nbsp;&nbsp;No</label>
								</div>
								<p class="text-center" [ngClass]="{ 'd-none': invalidClass === false }" style="color: red">Please Choose Any one option</p>
							</div>
						</div>
					</div>
					<div class="d-flex space-between" style="justify-content: space-between">
						<button pButton type="button" [style.visibility]="product.id == 1 ? 'hidden' : 'visible'" class="text-white p-ripple p-button-rounded p-button-info-prev p-button p-component p-2" (click)="previous(product.id)"><i class="fa fa-arrow-left exhausted-plan-icon-prev"></i> Previous</button>
						<button pButton type="button" *ngIf="product.id != 4" class="text-white p-ripple p-button-rounded p-button-info-next p-button p-component p-2" (click)="next(product.id)">Next<i class="fa fa-arrow-right exhausted-plan-icon-next"></i></button>
						<button pButton type="button" *ngIf="product.id == 4" class="text-white p-ripple p-button-rounded p-button-info-succes p-button p-component p-2" (click)="getRecommendation(product.id)">Get Recommendations<i class="fa fa-check-circle exhausted-plan-icon-success"></i></button>
					</div>
				</ng-template>
			</p-carousel>
			<div class="container" *ngIf="enableModule">
				<p-card class="bg-blue">
					<div class="row align-items-center">
						<div class="col-md-8 col-12">
							<p class="info-recommend text-md-start text-center" *ngIf="recommended?.planname != 'no'">We recommend the {{ recommended?.planname }} plan based on your choices.Subscribe or Upgrade your plan to enjoy our services.</p>
							<p class="info-recommend text-md-start text-center" *ngIf="recommended?.planname == 'no'">We recommend {{ recommended?.planname }} plan based on your choices.</p>
						</div>
						<div class="col-md-4 col-12 mt-md-0 mt-2 text-md-end text-center">
							<button pButton type="button" *ngIf="recommended?.planname != 'no'" (click)="subscribeNow()" class="text-black b-none p-ripple p-button-rounded p-button p-component p-2 bg-white">Subscribe Now</button>
						</div>
					</div>
				</p-card>
				<ng-container *ngIf="recommended && recommended.recommends && recommended.recommends.length">
					<div *ngFor="let recommendList of recommended.recommends">
						<h3 class="text-center p-2" *ngIf="recommended?.planname != 'no'">Recommended {{ recommendList?.name }} Modules</h3>
						<h3 class="text-center p-2" *ngIf="recommended?.planname == 'no'">UNIPREP is not the right fit for you.</h3>
						<div class="row justify-content-center">
							<ng-container *ngIf="recommendList.details && recommendList.details.length">
								<div class="col-xxl-2 col-xl-2 col-lg-3 col-md-3 col-sm-4 col-6 mb-3 text-center" *ngFor="let modulesList of recommendList.details">
									<div class="card h-100">
										<div class="card-body">
											<div class="rimage mb-2">
												<img src="{{ modulesList.image_link }}" class="img-fluid" alt="Module Image" />
											</div>
											<h4 class="module-name mb-0">{{ modulesList.name }}</h4>
										</div>
									</div>
								</div>
							</ng-container>
						</div>
					</div>
				</ng-container>
				<div class="text-md-end text-center" *ngIf="enableModule">
					<button pButton type="button" class="text-black b-none p-ripple p-button-rounded p-danger-button p-button p-component p-2 bg-white" (click)="resetRecommendation()">
						Reset Recommendations<span class="fa-stack">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-undo fa-stack-1x fa-inverse"></i>
						</span>
					</button>
				</div>
			</div>
		</div>
		<router-outlet></router-outlet>
	</div>
</div>
