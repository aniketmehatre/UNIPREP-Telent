<div class="card readingcard bg-white">
	<div class="card-body d-flex flex-column justify-content-between pt-0">
		<div class="row justify-content-center">
			<div class="col-md-3 text-start">
				<span class="d-flex justify-content-start p-2" style="white-space: nowrap">
					<input type="checkbox" class="me-0" style="transform: scale(1.5)" [(ngModel)]="selectAllCheckboxes" (click)="selectAllCheckbox()" id="selectAllcheckbox" />
					<label class="p-2" for="selectAllcheckbox">Select All</label>
					<span class="p-2">Selected : {{ selectedCourses }}</span>
				</span>
			</div>
			<!-- <div class="col-md-6 text-center">
				<h5 class="select-title w-100 mb-1" tooltipPosition="top" pTooltip="Course List">COURSE LIST<i class="questiontooltip fa-solid fa-circle-question"></i></h5>
			</div> -->
			<div class="col-md-6 text-center">
				<div class="select-title text-nowrap d-flex justify-content-between align-items-center" style="width: 100%">
					<div>
						<h5 class="w-100 mb-1" tooltipPosition="top" pTooltip="Course List">COURSE LIST<i class="questiontooltip fa-solid fa-circle-question"></i></h5>
					</div>
					<div>
						<button class="how-it-works-button" (click)="openVideoPopup('https://www.youtube.com/embed/3-5YyylOgKw?si=5QiGijrze5j370y5')">How it works? <i class="fa-solid fa-play"></i></button>
					</div>
				</div>
			</div>
			<div class="col-md-3 text-end" style="white-space: nowrap">
				<span class="d-flex justify-content-end mt-3 gap-2">
					<button class="btn btn-primary text-small course-guidelines" (click)="closeGuidelines()" type="button">Course Guidelines</button>
					<button class="btn btn-primary text-small exportButton" (click)="exportData()" type="button">Export <span class="exportCount">0</span></button>
				</span>
				<div class="d-flex w-100 align-items-center justify-content-end mt-3 gap-2">
					<div class="pe-2">
						<span class="text-muted text-small"
							><strong>Total Courses: {{ totalCourseCount }} </strong></span
						>
					</div>
					<button class="btn btn-primary text-small ps-3 pe-3 pt-2 pb-2 br-8 p-1" (click)="filterBy()" type="button">Filter by</button>
					<button class="btn btn-primary text-small course-guidelines" (click)="buyCredits()" type="button">Buy Credits</button>
				</div>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row d-flex justify-content-center text-nowrap">
			<div class="col-lg-3 col-md-4 col-sm-6 col-xs-6 col-12 col-12 mt-3" *ngFor="let course of courseListData">
				<div class="card h-100 dataCard">
					<div class="card-body">
						<div class="flex-column d-flex justify-content-between h-100">
							<div class="d-flex flex-fill flex-column justify-content-between">
								<div class="d-flex flex-fill justify-content-start align-items-center gap-2 mb-2">
									<input type="checkbox" (change)="onCheckboxChange($event)" class="mt-1 inputselectbox"  [(ngModel)]="course.isChecked" />
									<div class="courseNameTag flex-fill h-100 d-flex align-items-center">
										<p class="mb-0 p-3">{{ course.course_name }}</p>
									</div>
								</div>
								<div class="d-flex justify-content-start gap-3 mb-2">
									<div class="courseImage" style="background-image: url('https://api.uniprep.ai/uniprepapi/storage/app/public/Pitch-deck-images/Airbnb.webp')"></div>
									<div class="courseUniversity flex-fill">
										<a [href]="course.university_url" target="_blank" class="text-decoration-none uniprep-primary">
											<h5 class="uniprep-primary text-wrap">{{ course.university_name }}</h5>
										</a>
										<div class="btn btn-dark w-100 btn-rounded">Shortlist</div>
									</div>
								</div>
							</div>

							<div class="row text-start">
								<div [ngClass]="{ 'col-12 mb-1': course.subject_name.length > 18, 'col-6 mb-1': true }">
									<p class=" text-wrap"><i class="fa-solid fa-graduation-cap"></i> {{ course.subject_name }}</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-regular fa-clock"></i> 1975</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-solid fa-globe"></i> {{ course.country }}</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-solid fa-location-crosshairs"></i> {{ course.location_name }}</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-solid fa-clock"></i> {{ course.duration }}</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-solid fa-calendar"></i> {{ course.intake_month }}</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-regular fa-hourglass"></i> {{ course.duration }}</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-solid fa-chart-simple"></i> 1025</p>
								</div>
								<div class="col-6 mb-1">
									<p><i class="fa-solid fa-stairs"></i> {{ course.study_level }}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<p-paginator *ngIf="totalCourseCount != 0" [rows]="perPage" [totalRecords]="totalCourseCount" (onPageChange)="pageChange($event)" [rowsPerPageOptions]="[50, 100, 300, 500, 1000]"></p-paginator>
</div>
<p-dialog header="Filter Courses" [(visible)]="isFilterVisible" [modal]="true" [style]="{ width: '60rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [ngStyle]="{ display: isFilterVisible }" class="filterDialog">
	<div class="m-5">
		<form role="form" [formGroup]="filterForm" (ngSubmit)="getCourseLists()">
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Country</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="company_name" placeholder="Search in Country" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Location</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="location_name" placeholder="Search in Location" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by University</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="university_name" placeholder="Search in University" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Subject</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="subject_name" placeholder="Search in Subject" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Duration</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="duration" placeholder="Search in Duration" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Intake</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="intake" placeholder="Search in Intake" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Stay Back</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="stay_back" placeholder="Search in Stay Back" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by World Rank</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="world_rank" placeholder="Search in World Rank" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label class="form-label filterField">Filter by Tution Fees Range</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px" type="text" formControlName="fees_range" placeholder="Search in Tution Fees Range" pInputText />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div>
				<button type="submit" class="btn btn-dark w-100" style="background-color: var(--uniprep-primary); border: none">Apply Filter</button>
				<button class="btn btn-dark w-100" (click)="clearFilter()" style="background-color: white; border-radius: 8px; color: var(--uniprep-primary); border: none" type="button">Reset Filter</button>
			</div>
		</form>
	</div>
</p-dialog>
