<ng-container *ngIf="!preparedvisibility"
	><div class="card readingcard">
		<ng-container *ngIf="!enableModule">
			<div class="card-header border-0 bg-transparent">
				<div class="row justify-content-center">
					<div class="col-md-12 d-flex gap-2 text-center">
						<div class="backIcon" role="button" (click)="goBack()">
							<span class="fa-solid fa-chevron-left"></span>
						</div>
						<div class="select-title d-flex justify-content-between align-items-center">
							<div class="d-flex gap-2">
								<h5 routerLink="/pages/dashboard" role="button" class="mb-0" tooltipPosition="top" pTooltip=""><i class="fa-regular fa-home"></i></h5>
								<span><i class="fa-solid fa-chevron-right"></i></span>
								<h5 routerLink="/pages/job-tool/career-tool" role="button" class="mb-0" tooltipPosition="top" pTooltip="">Career Tools</h5>
								<span><i class="fa-solid fa-chevron-right"></i></span>
								<h5 class="mb-0" tooltipPosition="top" pTooltip="Access a curated list of companies by industry and location to target your job search effectively.">Job Offer Comparison Tool</h5>
							</div>
							<div>
								<!-- <button pButton class="how-it-works-button" (click)="
                      openVideoPopup(
                        'https://www.youtube.com/embed/cbny1-f4rXI?si=E3WEU6LuiMLWA1Uq'
                      )
                    ">
                                How it works?<i class="fa-solid fa-play d-md-block d-none"></i>
                            </button> -->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="card-body">
				<div class="container-fluid h-100">
					<p-carousel [value]="recommendations" [numVisible]="1" [numScroll]="1" [circular]="false" [showNavigators]="false" [showIndicators]="false" [page]="activePageIndex" styleClass="h-100">
						<ng-template let-recommendation let-i="index" pTemplate="item">
							<div class="h-100 d-flex flex-column justify-content-between comparisonform">
								<div>&nbsp;</div>
								<div class="row justify-content-center text-start">
									<div class="col-md-12 mb-5">
										<h2 class="fw-bold mb-0 text-center">{{ recommendation.question }}</h2>
									</div>
									<div class="col-md-8">
										<div class="recommendationinput d-flex flex-column justify-content-center gap-3">
											<ng-container *ngIf="recommendation.id == 1">
												<!-- Job Offer Form -->
												<form [formGroup]="basicInformationForm">
													<div class="row" formArrayName="basicInformation">
														<div class="col-md-11">
															<!-- Company Name Row -->
															<div class="row mb-4 align-items-center">
																<div class="col-md-2">
																	<div class="fw-bold text-start">
																		<h5 class="fw-bold mb-0">Company Name</h5>
																	</div>
																</div>
																<ng-container *ngFor="let info of basicInformation.controls; let i = index" [formGroupName]="i">
																	<div [ngClass]="basicInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																		<input type="text" class="w-100 form-control" formControlName="companyName" placeholder="Enter company name" />
																		<div *ngIf="info.get('companyName')?.touched && info.get('companyName')?.invalid" class="text-danger mt-1">Company Name is required.</div>
																	</div>
																</ng-container>
															</div>

															<!-- Position Row -->
															<div class="row mb-4 align-items-center">
																<div class="col-md-2">
																	<div class="fw-bold text-start">
																		<h5 class="fw-bold mb-0">Position</h5>
																	</div>
																</div>
																<ng-container *ngFor="let info of basicInformation.controls; let i = index" [formGroupName]="i">
																	<div [ngClass]="basicInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																		<p-select [style]="{ width: '100%' }" [options]="positions" formControlName="position_title" placeholder="Select a position" display="chip" optionLabel="jobrole" optionValue="id" [appendTo]="'body'"  [virtualScroll]="true" [virtualScrollItemSize]="30" [filter]="true" filterBy="jobrole"> </p-select>
																		<div *ngIf="info.get('position_title')?.touched && info.get('position_title')?.invalid" class="text-danger mt-1">Position is required.</div>
																	</div>
																</ng-container>
															</div>

															<!-- Job Location Row -->
															<div class="row align-items-center">
																<div class="col-md-2">
																	<div class="fw-bold text-start">
																		<h5 class="fw-bold mb-0">Job Location</h5>
																	</div>
																</div>
																<ng-container *ngFor="let info of basicInformation.controls; let i = index" [formGroupName]="i">
																	<div [ngClass]="basicInformation.length === 2 ? 'col-md-5' : 'col-md-3'" class="position-relative">
																		<p-select [style]="{ width: '100%' }" styleClass="w-100" placeholder="Select Location" display="chip" optionLabel="city_name" optionValue="city_id" [appendTo]="'body'" [virtualScroll]="true" [virtualScrollItemSize]="30" [filter]="true" filterBy="city_name" [options]="locations" formControlName="location" > </p-select>
																		<div *ngIf="info.get('location')?.touched && info.get('location')?.invalid" class="text-danger mt-1">Job Location is required.</div>
																		<div class="mt-3 text-end" *ngIf="basicInformation.length > 2">
																			<button pButton type="button" class="formarraybtn btn btn-danger p-button-sm" (click)="removeEntry(i)">
																				<i class="pi pi-minus"></i>
																			</button>
																		</div>
																	</div>
																</ng-container>
															</div>
														</div>

														<div class="col" *ngIf="basicInformation.length < 3">
															<button pButton type="button" class="formarraybtn btn btn-primary" (click)="addEntry()">+</button>
														</div>
													</div>
												</form>
											</ng-container>
											<ng-container *ngIf="recommendation.id == 2">
												<!-- Salary and Benefits Form -->
												<form [formGroup]="salaryandemployeeBenefitsForm">
													<div class="row" formArrayName="benefitsInformation">
														<div class="row mb-4 align-items-center">
															<div class="col-md-2"></div>
															<ng-container *ngFor="let info of worktimingsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="worktimingsInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<h6 class="fw-bold text-center">
																		{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																	</h6>
																</div>
															</ng-container>
														</div>
														<!-- Headings Column -->
														<!-- <div class="col-md-3">
															<div class="p-2 fw-bold text-end"></div>
															<div class="p-3 fw-bold text-end">
																<h5 class="fw-bold mb-0">Annual Salary</h5>
															</div>
															<div class="p-3 fw-bold text-end">
																<h5 class="fw-bold mb-0">Employe Benefits</h5>
															</div>
														</div> -->

														<!-- Fields Column -->
														<!-- <div class="col-md-7">
															<div class="row col-md-12">
																<div class="d-flex gap-2" formArrayName="benefitsInformation">
																	<ng-container *ngFor="let benefitsinfo of benefitsInformation.controls; let i = index">
																		<ng-container [formGroupName]="i">
																			<div [ngClass]="benefitsInformation.length === 2 ? 'col-md-6' : 'col-md-4'">
																				<div class="mb-2 text-center">
																					<h6 class="fw-bold">
																						{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																					</h6>
																				</div> -->
														<!-- Salary --><!-- Currency -->
														<!-- <div class="col-md-12 d-flex mb-2">
																					<div class="col-md-5">
																						<p-select [style]="{ width: '100%' }" [options]="currencies" formControlName="currency" optionLabel="currency_code" optionValue="currency_code" [appendTo]="'body'" placeholder="Currency" [filter]="true" filterBy="country,currency_code"  styleClass="w-100">
																							<ng-template let-data pTemplate="item">
																								<div>
																									{{ data.country }} -
																									{{ data.currency_code }}
																								</div>
																							</ng-template>
																						</p-select>
																						<div *ngIf="benefitsinfo.get('currency')?.touched && benefitsinfo.get('currency')?.invalid" class="text-danger mt-1">Currency is required.</div>
																					</div>
																					<div class="col-md-7">
																						<input type="text" class="w-100 form-control" formControlName="salary" placeholder="Salary" />
																						<div *ngIf="benefitsinfo.get('salary')?.touched && benefitsinfo.get('salary')?.invalid" class="text-danger mt-1">Salary is required.</div>
																					</div>
																				</div> -->

														<!-- Benefits -->
														<!-- <div class="mb-2">
																					<p-multiSelect  display="chip" styleClass="w-100" placeholder="Benefits" formControlName="benefits" [options]="employeebenefits" display="chip" optionLabel="benefit" optionValue="id" [appendTo]="'body'"></p-multiSelect>
																					<div *ngIf="benefitsinfo.get('benefits')[i]?.touched && benefitsinfo.get('benefits')[i]?.invalid" class="text-danger mt-1">Benefits is required.</div>
																				</div>
																			</div>
																		</ng-container>
																	</ng-container>
																</div>
															</div>
															<ng-container *ngFor="let benefitsinfo of benefitsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="benefitsInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<h6 class="fw-bold">
																		{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																	</h6>
																</div>
															</ng-container>
														</div> -->

														<!-- Annual Salary Row -->
														<div class="row mb-4 align-items-center">
															<div class="col-md-2">
																<div class="fw-bold text-start">
																	<h5 class="fw-bold mb-0">Annual Salary</h5>
																</div>
															</div>
															<ng-container *ngFor="let benefitsinfo of benefitsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="benefitsInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<div class="d-flex gap-2">
																		<div class="col-5">
																			<p-select [style]="{ width: '100%' }" [options]="currencies" formControlName="currency" optionLabel="currency_code" optionValue="currency_code" [appendTo]="'body'" placeholder="Currency" [filter]="true" filterBy="country"  styleClass="w-100">
																				<ng-template let-data pTemplate="item">
																					<div>{{ data.country }} - {{ data.currency_code }}</div>
																				</ng-template>
																			</p-select>
																			<div *ngIf="benefitsinfo.get('currency')?.touched && benefitsinfo.get('currency')?.invalid" class="text-danger mt-1">Currency is required.</div>
																		</div>
																		<div class="col-7">
																			<input type="text" class="w-100 form-control" formControlName="salary" placeholder="Salary" />
																			<div *ngIf="benefitsinfo.get('salary')?.touched && benefitsinfo.get('salary')?.invalid" class="text-danger mt-1">Salary is required.</div>
																		</div>
																	</div>
																</div>
															</ng-container>
														</div>

														<!-- Employee Benefits Row -->
														<div class="row align-items-center">
															<div class="col-md-2">
																<div class="fw-bold text-start">
																	<h5 class="fw-bold mb-0">Employee Benefits</h5>
																</div>
															</div>
															<ng-container *ngFor="let benefitsinfo of benefitsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="benefitsInformation.length === 2 ? 'col-md-5' : 'col-md-3'" class="position-relative">
																	<p-multiSelect  display="chip" styleClass="w-100" placeholder="Benefits" formControlName="benefits" [options]="employeebenefits" optionLabel="benefit" optionValue="id" [appendTo]="'body'"> </p-multiSelect>
																	<div *ngIf="benefitsinfo.get('benefits')[i]?.touched && benefitsinfo.get('benefits')[i]?.invalid" class="text-danger mt-1">Benefits is required.</div>
																</div>
															</ng-container>
														</div>
													</div>
												</form>
											</ng-container>
											<ng-container *ngIf="recommendation.id == 3">
												<!-- Work Timings Form -->
												<form [formGroup]="worktimingsForm">
													<div class="row" formArrayName="worktimingsInformation">
														<!-- Company Names Row -->
														<div class="row mb-4 align-items-center">
															<div class="col-md-2"></div>
															<ng-container *ngFor="let info of worktimingsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="worktimingsInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<h6 class="fw-bold text-center">
																		{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																	</h6>
																</div>
															</ng-container>
														</div>

														<!-- Working Hours & Days Row -->
														<div class="row mb-4 align-items-center">
															<div class="col-md-2">
																<div class="fw-bold text-start">
																	<h5 class="fw-bold mb-0">Working Hours & Days</h5>
																</div>
															</div>
															<ng-container *ngFor="let info of worktimingsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="worktimingsInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<!-- Working Hours -->
																	<div class="mb-2">
																		<p-select [style]="{ width: '100%' }" [appendTo]="'body'"  display="chip" optionLabel="time" optionValue="id" [options]="workhours" formControlName="work_hours" placeholder="Working Hours"> </p-select>
																		<div *ngIf="info.get('work_hours')?.touched && info.get('work_hours')?.invalid" class="text-danger mt-1">Working Hours is required.</div>
																	</div>
																	<!-- Working Days -->
																	<div class="mb-2">
																		<p-select [style]="{ width: '100%' }" [appendTo]="'body'"  display="chip" optionLabel="day" optionValue="id" [options]="workingdays" formControlName="working_days" placeholder="Working Days"> </p-select>
																		<div *ngIf="info.get('working_days')?.touched && info.get('working_days')?.invalid" class="text-danger mt-1">Working Days is required.</div>
																	</div>
																</div>
															</ng-container>
														</div>

														<!-- Employment Type Row -->
														<div class="row align-items-center">
															<div class="col-md-2">
																<div class="fw-bold text-start">
																	<h5 class="fw-bold mb-0">Employment Type</h5>
																</div>
															</div>
															<ng-container *ngFor="let info of worktimingsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="worktimingsInformation.length === 2 ? 'col-md-5' : 'col-md-3'" class="position-relative">
																	<p-select [style]="{ width: '100%' }" [appendTo]="'body'"  display="chip" optionLabel="jobpreferences" optionValue="id" [options]="jobPreferences" formControlName="employment_type" placeholder="Employment Type"> </p-select>
																	<div *ngIf="info.get('employment_type')?.touched && info.get('employment_type')?.invalid" class="text-danger mt-1">Employment Type is required.</div>
																</div>
															</ng-container>
														</div>
													</div>
												</form>
											</ng-container>
											<ng-container *ngIf="recommendation.id == 4">
												<!-- Additional Perks Form -->
												<form [formGroup]="additionalPerksForm">
													<div class="row" formArrayName="additionalPerksInformation">
														<div class="row mb-4 align-items-center">
															<div class="col-md-2"></div>
															<ng-container *ngFor="let info of worktimingsInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="worktimingsInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<h6 class="fw-bold text-center">
																		{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																	</h6>
																</div>
															</ng-container>
														</div>
														<!-- Headings Column -->
														<!-- <div class="col-md-3">
															<div class="p-3 fw-bold text-end"></div>
															<div class="p-3 fw-bold text-end">
																<h5 class="fw-bold mb-0">Work Location Flexibility</h5>
															</div>
															<div class="p-3 fw-bold text-end">
																<h5 class="fw-bold mb-0">Other Benefits</h5>
															</div>
															<div class="p-3 fw-bold text-end">
																<h5 class="fw-bold mb-0">Travel Opportunities</h5>
															</div>
														</div> -->

														<!-- Fields Column -->
														<!-- <div class="col-md-7">
															<div class="row col-md-12">
																<div class="d-flex gap-2" formArrayName="additionalPerksInformation">
																	<ng-container *ngFor="let info of additionalPerksInformation.controls; let i = index">
																		<ng-container [formGroupName]="i">
																			<div [ngClass]="additionalPerksInformation.length === 2 ? 'col-md-6' : 'col-md-4'">
																				<div class="mb-2 text-center">
																					<h6 class="fw-bold">
																						{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																					</h6>
																				</div> -->
														<!-- Workplace Type -->
														<!-- <div class="mb-2">
																					<p-select [style]="{ width: '100%' }" formControlName="workplacetypes" placeholder="Work Location Flexibility" display="chip" optionLabel="employment_type" optionValue="id" [options]="workplaceTypes" [appendTo]="'body'"  [virtualScroll]="true" [virtualScrollItemSize]="30" [filter]="true" filterBy="employment_type"> </p-select>
																					<div *ngIf="info.get('employment_type')?.touched && info.get('employment_type')?.invalid" class="text-danger mt-1">Work Location Flexibility is required.</div>
																				</div> -->
														<!-- Other Benefits -->
														<!-- <div class="mb-2">
																					<p-multiSelect styleClass="w-100" placeholder="Perks" formControlName="perks" [options]="workbenefits" display="chip" optionLabel="benefit" optionValue="id" [appendTo]="'body'"></p-multiSelect>

																					<div *ngIf="info.get('perks')?.touched && info.get('perks')?.invalid" class="text-danger mt-1">Other Benefits is required.</div>
																				</div> -->
														<!-- Travel Opportunities -->
														<!-- <div class="mb-2">
																					<p-multiSelect styleClass="w-100" placeholder="Oppurtunity" formControlName="travel_opportunities" [options]="traveloppurtunities" display="chip" optionLabel="oppurtunity" optionValue="id" [appendTo]="'body'"></p-multiSelect>

																					<div *ngIf="info.get('travel_opportunities')?.touched && info.get('travel_opportunities')?.invalid" class="text-danger mt-1">Travel Opportunities is required.</div>
																				</div>
																			</div>
																		</ng-container>
																	</ng-container>
																</div>
															</div>
															<ng-container *ngFor="let info of additionalPerksInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="additionalPerksInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<h6 class="fw-bold">
																		{{ basicInformationForm.controls.basicInformation.controls[i].get("companyName").value }}
																	</h6>
																</div>
															</ng-container>
														</div> -->

														<!-- Workplace Type & Other Benefits Row -->
														<div class="row mb-4 align-items-center">
															<div class="col-md-2">
																<div class="fw-bold text-start">
																	<h5 class="fw-bold mb-0">Workplace & Benefits</h5>
																</div>
															</div>
															<ng-container *ngFor="let info of additionalPerksInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="additionalPerksInformation.length === 2 ? 'col-md-5' : 'col-md-3'">
																	<!-- Workplace Type -->
																	<div class="mb-2">
																		<p-select [style]="{ width: '100%' }" formControlName="workplacetypes" placeholder="Select Employment Type" display="chip" optionLabel="employment_type" optionValue="id" [options]="workplaceTypes" [appendTo]="'body'"  [virtualScroll]="true" [virtualScrollItemSize]="30" [filter]="true" filterBy="employment_type"> </p-select>
																		<div *ngIf="info.get('employment_type')?.touched && info.get('employment_type')?.invalid" class="text-danger mt-1">Employment Type is required.</div>
																	</div>
																	<!-- Other Benefits -->
																	<div class="mb-2">
																		<p-multiSelect styleClass="w-100" placeholder="Perks" formControlName="perks" [options]="workbenefits" display="chip" optionLabel="benefit" optionValue="id" [appendTo]="'body'"> </p-multiSelect>
																		<div *ngIf="info.get('perks')?.touched && info.get('perks')?.invalid" class="text-danger mt-1">Other Benefits is required.</div>
																	</div>
																</div>
															</ng-container>
														</div>

														<!-- Travel Opportunities Row -->
														<div class="row align-items-center">
															<div class="col-md-2">
																<div class="fw-bold text-start">
																	<h5 class="fw-bold mb-0">Travel Opportunities</h5>
																</div>
															</div>
															<ng-container *ngFor="let info of additionalPerksInformation.controls; let i = index" [formGroupName]="i">
																<div [ngClass]="additionalPerksInformation.length === 2 ? 'col-md-5' : 'col-md-3'" class="position-relative">
																	<p-multiSelect styleClass="w-100" placeholder="Opportunity" formControlName="travel_opportunities" [options]="traveloppurtunities" display="chip" optionLabel="oppurtunity" optionValue="id" [appendTo]="'body'"> </p-multiSelect>
																	<div *ngIf="info.get('travel_opportunities')?.touched && info.get('travel_opportunities')?.invalid" class="text-danger mt-1">Travel Opportunities is required.</div>
																</div>
															</ng-container>
														</div>
													</div>
												</form>
											</ng-container>
										</div>
									</div>
								</div>
								<div class="d-flex justify-content-between mt-2">
									<button pButton (click)="previous()" [style.visibility]="recommendation.id == 1 ? 'hidden' : 'visible'" class="btn btn-back btn-rounded me-3 px-2 py-2">
										<div class="d-flex align-items-center prepmodule">
											<div class="btn-icon">
												<i class="fa-solid fa-arrow-left"></i>
											</div>
											<span class="fw-normal h6 mb-0 ps-3 pe-2">Previous</span>
										</div>
									</button>

									<button pButton (click)="next(recommendation.id)" *ngIf="recommendation.id != 4" class="btn btn-start btn-rounded m-0 px-2 py-2">
										<div class="d-flex align-items-center">
											<span class="fw-normal h6 mb-0 ps-3 pe-2">Next</span>
											<div class="btn-icon">
												<i class="fa-solid fa-arrow-right"></i>
											</div>
										</div>
									</button>
									<button pButton pButton type="button" (click)="next(recommendation.id)" *ngIf="recommendation.id == 4" class="btn btn-success btn-rounded p-1 ps-4">
										<span class="me-2">Compare</span><span class="btn-icon px-2 py-2"><i class="pi pi-check"></i></span>
									</button>
								</div>
							</div>
						</ng-template>
					</p-carousel>
				</div>
			</div>
		</ng-container>
	</div>
</ng-container>
<ng-container *ngIf="preparedvisibility">
	<uni-jopreparedlist [prepData]="prepData" (windowChange)="windowChange($event)"></uni-jopreparedlist>
</ng-container>
