<div class="card readingcard">
  <div class="card-body text-center pt-0">
    <div class="row">
      <div class="col-md-2 mt-3 text-start ms-2">
        <h5 class="bold">
          {{ totalquestion }}/{{ totalquestion }} Questions Left
        </h5>
      </div>
      <div class="col-md-7 text-center">
        <div class="select-title text-nowrap d-flex align-items-center">
          <div class="w-100">
            <h5 class="mb-0" tooltipPosition="top">
              {{ selected_module | uppercase }}
            </h5>
          </div>
        </div>
      </div>
      <div class="col-md-2 mt-2 text-end">
        <button
          pButton
          type="button"
          class="btn-customdanger btn btn-primary btn-rounded p-1 ps-4"
        >
          <span class="me-3">Quit</span
          ><span class="btn-customdangericon px-1 py-1"
            ><i class="fa fa-power-off"></i
          ></span>
        </button>
      </div>
      <div class="col-12 mt-2 text-start justify-content-start d-md-flex">
        <ng-container *ngIf="istypeAudio">
          <ngx-audio-player
            #audioplayer
            [autoPlay]="autoplay"
            [playlist]="quizprimaryAudio"
            [disablePositionSlider]="disablePositionSlider"
            [displayRepeatControls]="displayRepeatControls"
            [displayVolumeControls]="displayVolumeControls"
            [displayVolumeSlider]="displayVolumeSlider"
            [displayTitle]="displayTitle"
            allow="autoplay"
          >
          </ngx-audio-player>
          <!-- (trackEnded)="onEnded($event)" --></ng-container
        >
        <ng-container *ngIf="istypeParagraph">
          <div class="justify-content-center align-items-center">
            <div class="text-start">
              <h4>{{ paragraphTittle }}</h4>
            </div>
            <div class="text-start">
              {{ paragraphQuestion }}
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="istypeImage">
          <div class="col-12">
            <div class="text-center">
              <h4>{{ imageTittle }}</h4>
            </div>
            <div class="text-center">
              <div><img [src]="imageQuestion" style="height: 300px" /></div>
            </div>
          </div>
        </ng-container>
      </div>
      <div
        class="col-12 mt-3 justify-content-start d-md-flex"
        style="font-size: 18px !important"
      >
        <form [formGroup]="quizForm">
          <input type="hidden" formControlName="module_id" />
          <input type="hidden" formControlName="test_type_module_id" />
          <input type="hidden" formControlName="test_module_id" />
          <div class="container">
            <div formArrayName="questions" class="row">
              <div
                [ngClass]="quizLength > 1 ? 'col-6' : 'col-12'"
                class="mb-3"
                *ngFor="
                  let questionControl of questionsFormArray.controls;
                  let i = index
                "
                [formGroupName]="i"
              >
                <div class="form-group">
                  <div
                    style="font-size: small; font-weight: 600; color: #3f4c83"
                  >
                    Question {{ i + 1 }}:
                  </div>
                  <label style="font-size: 14px; font-weight: 600">{{
                    questionControl.get("question")?.value
                  }}</label>
                  <ng-container [ngSwitch]="questionControl.get('type')?.value">
                    <div *ngSwitchCase="'Fill in the Blank'">
                      <input
                        style="font-size: 14px"
                        pInputText
                        type="text"
                        formControlName="answer"
                        placeholder="Your answer here"
                        class="form-control"
                      />
                    </div>
                    <div *ngSwitchCase="'One Word'">
                      <input
                        style="font-size: 14px"
                        pInputText
                        type="text"
                        formControlName="answer"
                        placeholder="Your answer here"
                        class="form-control"
                      />
                    </div>
                    <div *ngSwitchCase="'Summarize Chart/Diagram/Table'">
                      <textarea
                        style="font-size: 14px"
                        formControlName="answer"
                        placeholder="Summarize answer here"
                        class="form-control w-100"
                      ></textarea>
                    </div>
                    <div *ngSwitchCase="'MCQ'">
                      <div
                        *ngFor="
                          let option of questionControl.get('options')?.value;
                          let j = index
                        "
                      >
                        <label style="font-size: 14px">
                          <input
                            type="checkbox"
                            formControlName="selectedOptions"
                            class="form-check-input"
                            (change)="onCheckboxChange($event, i, j)"
                          />
                          {{ option }}
                        </label>
                      </div>
                    </div>
                    <div *ngSwitchCase="'True or False'">
                      <label class="me-2" style="font-size: 14px">
                        <input
                          style="font-size: 14px"
                          type="radio"
                          formControlName="selectedOption"
                          [value]="'True'"
                          class="form-check-input"
                        />
                        True
                      </label>
                      <label style="font-size: 14px">
                        <input
                          style="font-size: 14px"
                          type="radio"
                          formControlName="selectedOption"
                          [value]="'False'"
                          class="form-check-input"
                        />
                        False
                      </label>
                    </div>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="card-footer bg-white">
    <div class="d-flex justify-content-between">
      <!-- <div>
        Questions
        <ng-container
          *ngFor="
            let questionnumber of QuestionSequence(totalquestion);
            let i = index
          "
          ><button
            class="btn btn-outline-primary outline-primary me-1"
            [ngClass]="{ customactive: activeQuestion === i }"
            (click)="activeQuestion = i"
            readonly
          >
            {{ i + 1 }}
          </button></ng-container
        >
      </div> -->
      <div class="col-12 text-end">
        <button
          pButton
          type="button"
          class="btn-previous btn btn-primary btn-rounded p-1 ps-4 me-2"
          (click)="btn_previousclick()"
        >
          <span class="me-3">Previous</span
          ><span class="btn-custompreviousicon px-1 py-1"
            ><i class="fa fa-arrow-left"></i
          ></span>
        </button>
        <button
          pButton
          type="button"
          class="btn btn-primary btn-rounded p-1 ps-4"
          (click)="submitTest()"
        >
          <span class="me-3">Submit</span
          ><span class="btn-customicon px-1 py-1"
            ><i class="fa-solid fa-check"></i
          ></span>
        </button>
      </div>
    </div>
  </div>
</div>
