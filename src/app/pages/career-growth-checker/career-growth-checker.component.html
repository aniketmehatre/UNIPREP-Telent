<div class="row w-100 h-100 m-0 justify-content-center align-items-center" *ngIf="showSearch">
    <div class="col-6">
        <h3 style="color: var(--uniprep-primary);" class="text-center">
            Apply to millions of job opportunities across top companies, industries and locations
        </h3>
        <div class="dropdown-container" style="margin-top: 20px;">
            <form [formGroup]="checkForm" (ngSubmit)="search()">
                <div class="form-group d-flex align-items-center mb-3" style="margin-left: 0;">
                    <div class="position-relative" style="flex: 1; margin-right: 10px;">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" 
                            id="jobSearch" 
                            class="elliptical-search-bar" 
                            formControlName="jobSearch"
                            (input)="onInputChange($event)">
                        <ul *ngIf="hasfilteredoptions" class="dropdown-list">
                            <li *ngFor="let option of filteredOptions" (click)="selectOption(option)" [id]="option.id">
                                {{ option.jobrole }}
                            </li>
                        </ul>
                        <div *ngIf="invalidClass" class="error-message" style="color: red; margin-top: 5px;">
                            Please Choose Any one option
                        </div>
                    </div>
                    <div style="flex: 1; margin-right: 10px; position: relative;"> 
                        <p-dropdown 
                            [options]="countries" 
                            styleClass="w-100" 
                            formControlName="country" 
                            optionValue="id" 
                            optionLabel="country" 
                            placeholder="Select Country">
                        </p-dropdown>
                        <div *ngIf="invalidClassCountry" class="error-message" style="color: red; position: absolute; top: 100%; left: 0;">
                            Please Choose Any one option
                        </div>
                    </div>
                    <button pButton type="submit" 
                            class="text-white p-ripple p-button-rounded p-button-info-search p-button p-component p-2">
                        Search <i class="fas fa-search search-icon-result exhausted-plan-icon-next"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="row w-100 h-100 m-0 justify-content-center align-items-start" *ngIf="showResult">
    <div class="col-6" class="text-center">
        <div class="fixed-header">
            <h3 style="color: var(--uniprep-primary);">
                Current Role : {{currentrole}}
            </h3>
            <div class="role-details-box">
                <div *ngFor="let detail of roleDetails;  let i = index" class="role-detail" [ngClass]="'detail-' + (i + 1)">
                    <span>{{ i + 1 }}. {{ detail }}</span>
                </div>
            </div>
        </div>    
        <div class="job-details-container">
            <div *ngFor="let detail of jobDetails; let i = index" class="job-detail">
                <div style="color: #f0780e; margin-top: 20px; font-weight: bold; font-size: 18px;">
                    Career Progression {{ i + 1 }}
                </div>
                <div style="background-color: #f0f0f0; padding: 15px; margin-top: 10px; border-radius: 15px;">
                        <span style="color: #3f4c83; font-weight: bold; display: block; margin-bottom: 10px; text-align: left; font-size: 18px;">
                            {{ detail.jobrole }}
                        </span>
                        <span style="color: #a0a0a0; font-size: 16px; display: block; margin-bottom: 10px; text-align: left;">
                            {{ detail.country }}
                        </span>

                        <div class="row" style="margin-top: 15px; text-align: left;">
                            <div class="col">
                                <strong style="color: #4552a3;">Roles & Responsibilities</strong><br />
                                <span style="display: block; margin-bottom: 5px;">
                                    <ng-container *ngFor="let role of detail.rolesArray">
                                        {{ role }}<br />
                                    </ng-container>
                                </span>
                            </div>
                            <div class="col">
                                <strong style="color: #4552a3;">Skills</strong><br />
                                <span style="display: block; margin-bottom: 5px;">
                                    <ul style="list-style-type: disc; padding-left: 20px;">
                                        <ng-container *ngFor="let skill of detail.skillsArray">
                                            <li>{{ skill }}</li>
                                        </ng-container>
                                    </ul>
                                </span>
                            </div> 
                            <div class="col">
                                <strong style="color: #4552a3;">Required Years of Experience</strong><br />
                                <span style="display: block; margin-bottom: 5px;">
                                    <ng-container>
                                        {{ detail.experience }}
                                    </ng-container>
                                </span>
                            </div>
                             <div class="col">
                                <strong style="color: #4552a3;">Average Salary in {{ detail.country }}</strong><br />
                                <span style="display: block; margin-bottom: 5px;">
                                    <ng-container>
                                        {{ detail.salary }} per year
                                    </ng-container>
                                </span>
                                <strong style="color: #4552a3;">Average Salary in India</strong><br />
                                <span style="display: block; margin-bottom: 5px;">
                                    <ng-container>
                                       {{ detail.india_salary }} per year
                                    </ng-container>
                                </span>
                            </div>
                        </div> 
                </div>
                <div *ngIf="i < jobDetails.length - 1" class="arrow-container">
                    <i class="fas fa-arrow-down arrow-icon"></i>
                </div>
            </div>
        </div>
    </div>
</div>

