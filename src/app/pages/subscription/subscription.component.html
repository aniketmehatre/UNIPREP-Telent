<ng-container [ngSwitch]="stage">
	<ng-container *ngSwitchCase="1">
		<ng-container *ngIf="!isCollegeStudent">
			<uni-subscription-data #applyTarget (upgrade)="start()" [history]="(orderHistory$ | async) || []" [billing]="user"
				[subscriptions]="subscriptionDetail$ | async" (subscriptionPlan)="pay($event)"
				[showHistoryBtn]="showHistoryBtn" (showHistory)="showHistory($event)">
			</uni-subscription-data>
		</ng-container>
		<ng-container *ngIf="isCollegeStudent">
			<uni-clg-subscription-data #applyTarget (upgrade)="start()" [history]="(orderHistory$ | async) || []" [billing]="user"
				[subscriptions]="subscriptionDetail$ | async" (subscriptionPlan)="pay($event)"
				[showHistoryBtn]="showHistoryBtn" (showHistory)="showHistory($event)">
			</uni-clg-subscription-data>
		</ng-container>
	</ng-container>

	<ng-container *ngSwitchCase="2">
		<uni-subscription-list [whichOneVisible]="isSubOrQuestion" (selected)="onSelectSubscription($event)"
			(selectedCredit)="onSelectQuestionCredit($event)" [country]="countryList"
			[plans]="(subscriptions$ | async) || []">
		</uni-subscription-list>
	</ng-container>

	<ng-container *ngSwitchCase="3">
		<uni-subscription-billing (pay)="pay($event)" (payQuestionCredit)="payQuestionCredit()" (change)="changePlan()"
			(changeQuestionCreditPlan)="changeQuestionCreditPlan()" [loading]="(orderLoading$ | async) || false"
			[plan]="selectedSubscription" [planQuestionCredit]="selectedQuestionCredit">
		</uni-subscription-billing>
	</ng-container>

	<ng-container *ngSwitchCase="4">
		<uni-subscription-success [plan]="success">
		</uni-subscription-success>
	</ng-container>

	<ng-container *ngSwitchCase="5">
		<uni-subscription-history [userSubscription]="userSubscription" [subscribedHistoryList]="subscribedHistoryData"
			(showPlan)="showPlan($event)" [showPlanBtn]="showPlanBtn" [subscribedCountryList]="subscribedCountryList"
			[accountBillingList]="accountBillingData">
		</uni-subscription-history>
	</ng-container>

	<p-dialog  [(visible)]="cardvisibility" [style]="{ width: '40rem', height: 'auto' }">
		<div style="padding: 2rem !important">
			@if (elementsOptions.clientSecret) {
			<ngx-stripe-payment [elementsOptions]="elementsOptions"></ngx-stripe-payment>
			}
			<button pButton class="mt-5 pt-3 pb-3 btn btn-basic w-100 m-0 btn btn-primary" (click)="paywithstripe()">
				<i class="fa-solid fa-lock mx-2"></i>
				Pay {{ selectedcost | currency : currencyType }}
			</button>
		</div>
	</p-dialog>
</ng-container>
<p-dialog [(visible)]="showPremimumPopup" [modal]="true" [draggable]="false" [resizable]="false"
	header="ðŸš€ This is a Premium Job - Application Closes in {{daysLeftInPremium()}} Days!" class="why-premium"
	[breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
	<div class="row">
		<div class="col-12">
			<h6 class="mb-3 fw-semibold">With UNIPREP Premium, you don't just apply - we help you get hired.</h6>
			<div class="d-flex flex-column gap-3">
				@for (feature of premiumFeatures; track $index) {
					<div class="d-flex align-items-center">
						<span [innerHTML]="feature"></span>
					</div>
				}
			</div>
		</div>
	</div>
	<div class="center-align mt-3">
		<button pButton class="btn-secondary px-5" [rounded]="true" type="button" (click)="applyNow()">Apply Now</button>
	</div>
</p-dialog>