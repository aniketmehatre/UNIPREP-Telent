<div class="card readingcard">
	<div class="card-body pt-0">
		<div class="row justify-content-center">
			<div class="col-md-3 text-start order-md-1 order-2">
				<div class="p-input-icon-left w-100 mt-3">
					<i class="pi pi-search"></i>
					<input class="w-100 px-5 py-2" type="text" placeholder="Search in Company List .." pInputText [(ngModel)]="valueNearYouFilter" (input)="performSearch($event)" (click)="searchClick()" id="searchInput" />
				</div>
			</div>
			<div class="col-md-6 text-center order-md-2 order-1">
				<h5 class="select-title mb-1" tooltipPosition="top" pTooltip="">COMPANY LIST</h5>
			</div>
			<div class="col-md-3 text-end order-md-3 order-3">
				<span class="d-flex justify-content-end mt-3 gap-2">
					<button class="btn btn-primary text-small company-guidlines" (click)="companyGuidlines()" type="button">Company Guidlines</button>
					<button class="btn btn-primary text-small ps-3 pe-3 pt-2 pb-2 br-8" (click)="filterBy()" type="button">Filter by</button>
					<!-- <button class="btn btn-danger ps-3 pe-3 pt-2 pb-2" (click)="resetFilter()"
                  style="border-radius: 8px; color: #fff;" type="button">
                  Reset</button> -->
				</span>
				<div class="d-flex w-100 align-items-center justify-content-end">
					<div class="pe-2">
						<span class="text-muted text-small"
							><strong>Total Companies : {{ totalCompanyCount }}</strong></span
						>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row">
				<div *ngFor="let companyData of companyData" class="col-md-3 col-12 mt-3">
					<div class="card companycard h-100">
						<div class="card-body d-flex flex-column justify-content-between">
							<div>
								<h5 class="uniprep-primary">{{ companyData.company_name }}</h5>
								<div class="d-flex mt-2 gap-5 align-items-center">
									<div class="d-flex gap-2 align-items-center">
										<i class="fa fa-map-marker locationicon" aria-hidden="true"></i>
										<p class="text-small mb-0">{{ companyData.country_name }}</p>
									</div>
									<div class="d-flex gap-2 align-items-center">
										<i class="fa fa-building headquartersicon" aria-hidden="true"></i>
										<p class="text-small mb-0">{{ companyData.head_quarters_name }}</p>
									</div>
								</div>
								<div class="d-flex mt-2 gap-5">
									<div class="d-flex gap-2 align-items-start">
										<i class="fa-solid fa-industry industryicon"></i>
										<p class="industrytext text-break text-small mb-0">{{ companyData.industry_interested_name }}</p>
									</div>
								</div>
							</div>
							<div class="d-flex gap-3 justify-content-end social-media">
								<div *ngIf="companyData.website && companyData.website.trim() !== ''">
									<a target="_blank" href="{{ companyData.website }}"><i class="fa-solid fa-globe"></i></a>
								</div>
								<div *ngIf="companyData.linked_in && companyData.linked_in.trim() !== ''">
									<a target="_blank" href="{{ companyData.linked_in }}"><i class="fa-brands fa-linkedin uniprep-primary"></i></a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div *ngIf="totalCompanyCount == 0" class="text-center margin-auto">
				<h3>No Results Found</h3>
				<p>
					The applied filter did not provide any results,<br />
					please try again by changing the parameters.
				</p>
			</div>
			<p-paginator *ngIf="totalCompanyCount != 0" [rows]="pageSize" [totalRecords]="totalCompanyCount" (onPageChange)="pageChange($event)" [rowsPerPageOptions]="[50, 100, 300, 500, 1000]"></p-paginator>
		</div>
		<!-- <div *ngIf="planExpired" class="resources-expired">
      <div class="row">
        <div class="col-md-2 text-start"></div>
        <div class="col-md-8 text-center">
          <h5 class="select-title mb-1" tooltipPosition="top" pTooltip="">
            COMPANY LIST
          </h5>
        </div>
        <div class="col-md-2"></div>
      </div>
      <div class="text-center mt-5 mb-4">
        <img src="../../../uniprep-assets/images/smartloack.png" class="image" width="80" />
        <h3>Upgrade now to access invaluable tools</h3>
        <p><br />
          Upgrade your plan now to gain instant access.
        </p>
        <p class="offer">
          Company list offers:<br />
          Access to over 1 million global companies database including company
          name, headquarters, industry, contact details and more!
        </p>
        <button pButton type="button" class="text-white p-ripple p-button-rounded p-button-warning p-button p-component"
          (click)="upgradePlan()">
          Upgrade Plan<i class="fa fa-arrow-right exhausted-plan-icon"></i>
        </button>
      </div>
    </div> -->
	</div>
</div>

<p-dialog header="Filter Companies" [(visible)]="isFilterVisible" [modal]="true" [style]="{ width: '60rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [ngStyle]="{ display: isFilterVisible }" class="filterDialog">
	<div class="m-5">
		<form role="form" [formGroup]="filterForm" (ngSubmit)="loadInvestorData()">
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<label class="form-label" style="font-size: medium; font-weight: 500">Filter by Company Name</label>
							<div class="form-group">
								<div class="mb-3">
									<input class="w-100 px-5 py-2" style="height: 45px;" type="text" formControlName="company_name" placeholder="Search in Company Name" pInputText />
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<label class="form-label" style="font-size: medium; font-weight: 500">Filter by Industry</label>
							<div class="form-group">
								<div class="mb-3">
									<p-multiSelect [options]="industryInterested" styleClass="w-100" formControlName="industry_interested" defaultLabel="Select Industry" optionValue="id" optionLabel="industry_name" #IndustriesMultiSelect [appendTo]="'body'">
										<ng-template pTemplate="selectedItems">
											{{ IndustriesMultiSelect.defaultLabel }}
										</ng-template>
									</p-multiSelect>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<label class="form-label" style="font-size: medium; font-weight: 500">Filter by Country</label>
							<div class="form-group">
								<div class="mb-3">
									<p-multiSelect [options]="countryList" styleClass="w-100" formControlName="country" optionValue="id" (onChange)="loadHeadQuartersData($event)" defaultLabel="Select Countries" optionLabel="country" #multiSelect [appendTo]="'body'"> </p-multiSelect>
									<div *ngIf="filterForm.hasError('org_name')" class="text-danger">
										{{ filterForm.getError("org_name") }}
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<label class="form-label" style="font-size: medium; font-weight: 500">Filter by Head Quarters</label>
							<div class="form-group">
								<div class="mb-3">
									<p-multiSelect [options]="headQuartersList" styleClass="w-100" formControlName="head_quarters" defaultLabel="Select Head Quarters" optionValue="id" optionLabel="head_quarters_name" #HeadMultiSelect [appendTo]="'body'">
										<ng-template pTemplate="selectedItems">
											{{ HeadMultiSelect.defaultLabel }}
										</ng-template>
									</p-multiSelect>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div>
				<button type="submit" class="btn btn-dark w-100" style="background-color: var(--uniprep-primary); border: none">Apply Filter</button>
				<button class="btn btn-dark w-100" (click)="clearFilter()" style="background-color: white; border-radius: 8px; color: var(--uniprep-primary); border: none" type="button">Reset Filter</button>
			</div>
		</form>
	</div>
</p-dialog>
<p-dialog [(visible)]="restrict" [modal]="true" [style]="{ width: '30vw' }" [draggable]="false" [resizable]="false" class="restrictionDialog" [breakpoints]="{ '960px': '30vw', '959px': '60vw', '425px': '90vw' }" (onHide)="clearRestriction()">
	<div class="text-center mt-5 mb-4">
		<img src="../../../uniprep-assets/images/smartloack.png" class="image" width="60" />
		<h3 class="offer">Upgrade Required</h3>
		<p>To access this exclusive module,please upgrade your plan now</p>
		<button pButton type="button" class="text-white p-ripple p-button-rounded p-button-warning p-button p-component p-2" (click)="upgradePlan()">Upgrade Plan<i class="fa fa-arrow-right exhausted-plan-icon"></i></button>
	</div>
</p-dialog>
