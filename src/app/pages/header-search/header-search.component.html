<div class="container-fluid mb-2">
    <div class="row">
        <div class="search-dropdown px-0">
            <div class="col-12 md:col-4">
                <div class="p-inputgroup searchheight">
                    <div class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></div>
                    <input #searchInput (keyup)="onKey(searchInput.value)" (keyup.enter)="searchKeyWord(searchInput)"
                           [(ngModel)]="searchInputText"
                           (input)="onSearchChange(searchInput.value)" pInputText
                           placeholder="Enter Your Keywords Here"
                           type="text">
                    <span (click)="clearText()" *ngIf="showCloseIcon" class="border-0 input-group-text passwordvisibility"
                          role="button" style="background:transparent">
                        <i class="fa-solid fa-xmark text-danger" style="font-size: 1.25rem"></i>
                    </span>
                    <button (click)="searchKeyWord(searchInput)" class="btn-primary" label="Search" pButton pRipple
                            type="button"></button>
                </div>
                <div>
                    <ul *ngIf="isSearchResultFound" (scroll)="scrollHandler($event)"
                        class="list-group list-group-flush shadow-lg" #listgroup>
                        <li *ngFor="let c of searchResult" class="list-group-item border-0 pt-0 pb-0 mt-0 mb-0">
                            <div class="row">
                                <div class="col-md-9"  (click)="gerSelectedQuestion(c)">
                                <span [innerHTML]="dataContentChange(c.question)" class="pr-4 fa-sm"
                                      style="font-size: 12px; cursor: pointer">
                                </span>
                                </div>
                                <div class="col-md-3" style="cursor: pointer">
                                    <a style="font-size: 12px" (click)="redirectModule(c.module_name)">{{c.module_name}}</a> ->
                                    <a style="font-size: 12px" (click)='redirectToSubmodule(c)'>{{c.submodule_name}}</a>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item border-0"><div class="row mt-2">
                            <div class="col-md-6 text-start ">
                                <p class="text-left fa-sm fw-bold">If you can't find your Question!
                                    <span (click)="openChat()" role="button" class="text-primary font-primarycolor">Ask Us</span><p>
                            </div>
                            <div class="col-md-6 text-end">
                                <p class="text-right fa-sm fw-bold"> Total Related Questions: {{searchResult.length}}</p>
                            </div>
                        </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<p-dialog [(visible)]="isQuestionAnswerVisible" [draggable]="false" [modal]="true" [style]="{ width: '80vw' }"
          class="questionmodal" header="Header">
    <ng-template class="p-3" pTemplate="header">
        <h5 class="select-title text-center mb-3">SEARCHED FOR - {{countryName | uppercase}}</h5>
        <span class="text-xl font-bold"></span>
    </ng-template>
    <div class="container-fluid">
        <div class="row mb-3">
            <div class="col-md-12 mb-2">
                <p-breadcrumb [model]="breadCrumb"  class="max-w-full"></p-breadcrumb>
            </div>
            <div class="col-md-2">
                <button (click)="goToHome($event)" class="btn w-50 btn-secondary homecardbtn m-0 px-2 py-2">
                    <i class="fa-solid h5 fa-house"></i><br>
                    Home
                </button>
            </div>
            <div class="col-md-8 d-flex align-items-center justify-content-center text-center">
                <a role="button" *ngIf="isAnswerDialogVisiblePrev" (click)="clickPrevious(carousel, $event)"><i
                        class="text-green h4 mx-3 mb-0 fa-solid fa-circle-chevron-left"></i></a>
                <h5 class="mb-0">Question
                    Number {{selectedQuestion + 1}}</h5>
                <a role="button" *ngIf="isAnswerDialogVisibleNext" (click)="clickNext(carousel, $event)"><i
                        class="text-green mx-3 h4 fa-solid mb-0 fa-circle-chevron-right"></i></a>
            </div>
            <div class="col-md-2 gap-2 text-right d-flex align-items-right justify-content-right">
                <button (click)="openReport()" class="btn w-50 btn-primary homecardbtn m-0 px-2 py-2">
                    <i class="fa-solid h5 fa-file-contract"></i>
                    <br>
                    Report
                </button>
                <!-- <button style="display: none;" (click)="reviewBy()" class="btn w-100 btn-primary homecardbtn m-0 px-2 py-2">
                    <i class="pi pi-user  h5 "></i><br>
                    Reviewed By
                </button> -->
            </div>
        </div>
        <p-carousel #carousel  [circular]="true" [numScroll]="1" [numVisible]="1"
                    [page]="selectedQuestion" [responsiveOptions]="responsiveOptions" [value]="searchResult"
                    class="answersection">
            <ng-template [ngForOf]="searchResult" let-i="index" let-val ngFor pTemplate="item">
                <div class="row text-center">
                    <div class="col-12">
                        <div class="card answercard">
                            <div class="card-body text-start">
                                <p class="text-small blockquote text-start mb-0">Last updated at: {{val.updated_at | date}}</p>
                                <h3 class="unselectable" [innerHTML]="val.question"></h3>
                                <div class="fw-medium worksans unselectable" style="white-space:pre-wrap;" [innerHTML]="val.answer"></div>

                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </p-carousel>
    </div>
    <ng-template class="p-3" pTemplate="footer">
        <div class="container-fluid px-5">
            <div class="row mt-5 mb-4">
                <div class="col-md-5">
                    <h5 class="text-start" *ngIf="videoLinks">Recommended Videos</h5>
                    <div class="d-flex flex-wrap gap-3">
                        <a class="px-4 m-0 py-2 btn btn-primary btn-rounded" target="_blank" href="{{videoL.link}}" *ngFor="let videoL of videoLinks;let ind=index;">Video {{ind+1}} &nbsp;<i class="fa-solid fa-video"></i></a>
                    </div>
                </div>
                <div class="col-md-5">
                    <h5 class="text-start" *ngIf="refLink">Recommended Links</h5>
                    <div class="d-flex flex-wrap gap-3">
                        <a class="px-4 m-0 py-2 btn btn-secondary btn-rounded" target="_blank" href="{{refL.link}}" *ngFor="let refL of refLink;let ind=index;">Link {{ind+1}} &nbsp;<i class="fa-solid fa-link"></i></a>
                    </div>
                </div>
                <div class="col-md-2">
                    <button class="btn w-100 btn-primary homecardbtn m-0 px-2 py-2" (click)="onClickAsk()">
                        <i class="fa-solid h5 fa-file-contract"></i>
                        <br>
                        Click here to ask<br>Personalised Questions
                    </button>
                </div>
            </div>
        </div>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="isReviewedByVisible" [draggable]="false" label="Show" [modal]="true"
          [maximizable]="true" [style]="{ width: '30vw' }"
          header="Header">
    <ng-template pTemplate="header">
        <span class="text-xl font-bold ms-2">Reviewed</span>
    </ng-template>
    <div class="container-fluid">
        <div class="row justify-content-center align-items-center">
            <div class="col-md-3" *ngFor="let review of reviewedByOrgList">
                <img src="{{review.logo}}" [alt]="review.organizationname" class="w-2 shadow-2 img-fluid" />
            </div>
        </div>
    </div>
</p-dialog>