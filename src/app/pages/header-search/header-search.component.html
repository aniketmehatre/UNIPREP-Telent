<div class="search-dropdown px-0 mb-2">
	<div class="col-12 md:col-4">
		<div class="p-inputgroup searchheight">
			<div class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></div>
			<input #searchInput (keyup)="onKey(searchInput.value)" (keyup.enter)="searchKeyWord(searchInput)" [(ngModel)]="searchInputText" (input)="onSearchChange(searchInput.value)" pInputText placeholder="Enter Your Keywords Here" type="text" />
			<span (click)="clearText()" *ngIf="showCloseIcon" class="border-0 input-group-text passwordvisibility" role="button" style="background: transparent">
				<i class="fa-solid fa-xmark text-danger" style="font-size: 1.25rem"></i>
			</span>
			<button (click)="searchKeyWord(searchInput)" class="btn-primary" label="SEARCH" pButton pRipple type="button"></button>
		</div>
		<div>
			<ul *ngIf="isSearchResultFound" (scroll)="scrollHandler($event)" scrollTracker (scrollingFinished)="onScrollingFinished()" class="multiselect-list list-group list-group-flush shadow-lg" #listgroup>
				<li *ngFor="let c of searchResult" class="list-group-item border-0 pt-0 pb-0 mt-0 mb-0 multiselect-list--option">
					<div class="row mb-1">
						<div class="col-md-9" (click)="gerSelectedQuestion(c)">
							<span [innerHTML]="dataContentChange(c.question)" class="pr-4 fa-sm" style="font-size: 13px; cursor: pointer"> </span>
						</div>
						<div class="col-md-3" style="cursor: pointer">
							<a style="font-size: 10px" (click)="redirectModule(c.module_name)">{{ c.module_name }}</a> ->
							<a style="font-size: 10px" (click)="redirectToSubmodule(c)">{{ c.submodule_name }}</a>
						</div>
					</div>
				</li>
				<li class="list-group-item border-0">
					<div class="row mt-2">
						<div class="col-md-6 text-start">
							<p class="text-left fa-sm fw-bold">If you can't find your Question! <span (click)="openChat()" role="button" class="text-primary font-primarycolor">Ask Us</span></p>
							<p></p>
						</div>

						<div class="col-md-6 text-end">
							<p class="text-right fa-sm fw-bold">Total Related Questions: {{ searchKeywordTotalCount }}</p>
						</div>
					</div>
				</li>
			</ul>
		</div>
	</div>
</div>
<p-dialog #dialogContent [(visible)]="isQuestionAnswerVisible" [draggable]="false" [modal]="true" class="questionmodal" header="Header" [maximizable]="true" [style]="{ height: '80vh' }">
	<ng-template pTemplate="header">
		<div class="d-flex flex-column w-100 pl-4 pr-4 mb-4">
			<div>
				<h5 class="select-title text-center mb-0">Searched For - {{ searchInputValue | uppercase }}</h5>
				<span class="text-xl font-bold"></span>
			</div>
			<div class="d-flex justify-content-between align-items-center">
				<div>
					<button (click)="goToHome($event)" class="btn btn-warning homecardbtn px-3">
						<i class="fa-solid h5 fa-house"></i><br />
						Home
					</button>
				</div>
				<div class="mobile">
					<p-breadcrumb #bread [model]="breadCrumb" (onItemClick)="breadCrumbClick(bread, $event)" class="max-w-100"></p-breadcrumb>
				</div>
				<div class="desktop">
					<p-breadcrumb [model]="breadCrumb" class="max-w-100"></p-breadcrumb>
				</div>
				<div>
					<button (click)="openReport()" class="btn btn-primary px-4 homecardbtn">
						<i class="fa-solid h5 fa-file-contract"></i>
						<br />
						<span>Report</span>
					</button>
					<button style="display: none" (click)="reviewBy()" class="btn btn-primary homecardbtn my-0 px-4 py-2">
						<i class="fa-regular fa-user h5"></i><br />
						Reviewed By
					</button>
				</div>
			</div>
		</div>
	</ng-template>
	<div class="carousel-container px-4">
		<p-carousel #carousel [circular]="true" [numScroll]="1" [numVisible]="1" [page]="selectedQuestion" [responsiveOptions]="responsiveOptions" [value]="searchResult" class="answersection">
			<ng-template [ngForOf]="searchResult" let-i="index" let-val ngFor pTemplate="item">
				<div class="card answercard">
					<div class="card-body text-start">
						<p class="text-small blockquote text-start mb-0">
							Last updated at: {{ val.updated_at | date }} <span class="badge" style="background-color: {{ val.pre_verified == 1 ? 'darkorchid' : '#3f4c83' }};"> {{ val.pre_verified == 1 ? "Pre Verified" : "Non Pre-Verified" }}</span>
						</p>
						<h3 class="unselectable" [innerHTML]="val.question"></h3>
						<div class="fw-medium worksans unselectable" style="white-space: pre-wrap" [innerHTML]="val.answer"></div>
					</div>
				</div>
			</ng-template>
		</p-carousel>
	</div>
	<ng-template pTemplate="footer">
		<div class="d-flex justify-content-between flex-column flex-md-row px-4 my-4">
			<div class="flex-full" *ngIf="videoLinks">
				<h5 class="text-start">Recommended Videos</h5>
				<div class="d-flex align-items-center gap-2 pb-2">
					<button class="scroll-button btn-rounded" *ngIf="leftScrollButtonVisible" (click)="scrollLeftVideo()">
						<i class="fa-solid fa-chevron-left"></i>
					</button>
					<div class="scrollable-container" id="video-links-container" #videoLinksContainer>
						<div class="scroll-content">
							<span class="btn btn-primary text-small videolinkbutton flex-shrink-0" (click)="openVideoPopup(videoL.link)" *ngFor="let videoL of videoLinks; let ind = index">Video {{ ind + 1 }} &nbsp;<i class="fa-solid fa-video"></i></span>
						</div>
					</div>
					<button class="scroll-button btn-rounded" *ngIf="rightScrollButtonVisible" (click)="scrollRightVideo()">
						<i class="fa-solid fa-chevron-right"></i>
					</button>
				</div>
			</div>
			<div class="flex-full" *ngIf="refLink">
				<h5 class="text-start">Recommended Links</h5>
				<div class="d-flex align-items-center gap-2 pb-2">
					<button class="scroll-button-warning btn-secondary btn-rounded" *ngIf="leftScrollButtonVisibleRef" (click)="scrollLeftRef()">
						<i class="fa-solid fa-chevron-left"></i>
					</button>
					<div class="scrollable-container" id="ref-links-container" #refLinksContainer>
						<div class="scroll-content">
							<a class="btn btn-secondary reflinkbutton" target="_blank" href="{{ refL.link }}" *ngFor="let refL of refLink; let ind = index">Link {{ ind + 1 }} &nbsp;<i class="fa-solid fa-link"></i></a>
						</div>
					</div>
					<button class="scroll-button-warning btn-secondary btn-rounded" *ngIf="rightScrollButtonVisibleRef" (click)="scrollRightRef()">
						<i class="fa-solid fa-chevron-right"></i>
					</button>
				</div>
			</div>
			<div class="flex-shrink-0 align-items-center d-flex desktop">
				<button class="btn w-100 btn-primary theme-dark-blue mx-0 px-5 py-2" (click)="onClickAsk()">
					<i class="fa-solid h5 fa-file-contract"></i>
					<br />
					Click here to ask<br />Personalised Questions
				</button>
			</div>
			<div class="mobile mt-4">
				<button class="btn w-100 btn-primary theme-dark-blue d-flex" (click)="onClickAsk()"><i class="fa-solid fa-comment f-20"></i><span class="comment">Click here to ask personalised questions</span></button>
			</div>
		</div>
	</ng-template>
</p-dialog>

<p-dialog [(visible)]="isReviewedByVisible" [draggable]="false" label="Show" [modal]="true" [maximizable]="true" [style]="{ width: '30vw' }" header="Header">
	<ng-template pTemplate="header">
		<span class="text-xl font-bold ms-2">Reviewed</span>
	</ng-template>
	<div class="container-fluid">
		<div class="row justify-content-center align-items-center">
			<div class="col-md-3" *ngFor="let review of reviewedByOrgList">
				<img src="{{ review.logo }}" [alt]="review.organizationname" class="w-2 shadow-2 img-fluid" />
			</div>
		</div>
	</div>
</p-dialog>
<!-- <p-dialog [(visible)]="visibleExhastedData" [closable]="false" class="p-0 m-0" [modal]="true"
	[draggable]="false" [resizable]="false">
	<div class="d-flex justify-content-between p-4">
		<div>
			<h4>Your <span class="text-xl font-bold p-1 fw-bold" style="color: #3f4c83"> Subscription</span> Was
				Exhausted</h4>
			<p class="get-certificate">Explore 1000+ modules and 10+ countries on UNIPREP.</p>
		</div>
		<div>
			<img src="../../../uniprep-assets/images/popup-clock.png" alt="clock" width="70" />
		</div>
	</div>
	<div class="px-5 pb-5 pt-3">
		<h4>Get more with our<span class="text-xl font-bold p-1 fw-bold" style="color: #3f4c83"> Subscription.</span>
		</h4>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Access to Over half a million questions and answers</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Ask any Personalized Questions & get answer within 8
			working hours</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Get Expert Answers to Your Queries</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Discover Unexplored Questions</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Find Answers to your question with Verified Source links
		</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Information verified by experts</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Navigate using Smart Keyword Search
		</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Updates on international career events
		</p>
		<p class="list-data"><i class="pi pi-check mr-2"></i>Access to global resources</p>
		<div class="d-flex justify-content-center">
			<button class="btn btn-primary btn-rounded me-2 ms-0 my-0" (click)="onClickSubscribedUser()"
				alt="chat with notification"><span class="text-small fw-normal px-3">Subscribe Now</span></button>
		</div>
	</div>
</p-dialog> -->

<div [ngStyle]="{ display: visibleExhastedData ? 'block' : 'none' }" class="modal modal-bg multiDeviceLogoutPopup" role="dialog" tabindex="-1">
	<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
		<div class="modal-content card bg-light">
			<div class="text-right-close">
				<a (click)="closeQuiz()" class="close" role="button">
					<span aria-hidden="true"><i class="fa fa-times" aria-hidden="true"></i></span>
				</a>
			</div>
			<div class="modal-body card-body">
				<div class="container">
					<div class="row mb-2">
						<div class="col-md-12 px-4">
							<div class="d-flex flex-column">
								<div class="icon-container mb-3 mt-3 text-center">
									<img src="../../../uniprep-assets/images/TrialExpire.png" alt="clock" width="100" />
								</div>
								<div class="mt-3 mb-1">
									<span>
										<strong class="firsttimelogin">
											<h5 style="color: rgb(63 76 131)">Oops! Your Free Trail Expired</h5>
										</strong>
									</span>
								</div>
								<div class="mt-1 text-center">
									<span>
										<strong class="firsttimelogin">
											<h2 style="color: #f0780e; margin-bottom: 0">Subscribe now to continue using the platform.</h2>
										</strong>
									</span>
								</div>
								<div class="icon-container mt-1 d-flex justify-content-center mb-1">
									<h6 style="color: rgb(63 76 131)">Enjoy complete access to <strong>UNIPREP</strong> V 1.0</h6>
								</div>
								<div class="d-flex justify-content-center">
									<button class="btn btn-primary btn-rounded me-2 ms-0 my-0" (click)="onClickSubscribedUser()" alt="chat with notification"><span class="text-small fw-normal px-3">Subscribe Now</span></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- vedio pop up -->
<div *ngIf="showVideoPopup" class="modal-overlay" dropdownAppendTo="body">
	<div class="modal-container">
		<button class="close-button" tooltipPosition="top" pTooltip="Close" (click)="closeVideoPopup()">
			<b><i class="fa-solid fa-circle-xmark fa-2x"></i></b>
		</button>
		<button class="newwindow-button" tooltipPosition="top" pTooltip="Open New Window" (click)="openNextVideo()">
			<b><i class="fa-solid fa-circle-plus fa-1x"></i></b>
		</button>
		<!-- Use the safe pipe here for the src attribute -->
		<iframe class="video-container" [src]="selectedVideoLink" frameborder="0" allowfullscreen></iframe>
	</div>
</div>
