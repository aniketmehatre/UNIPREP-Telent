<div class="card readingcard h-100">
  <div class="card-header border-0 bg-transparent">
    <div class="row">
      <div class="col-md-12 d-flex gap-2 text-center">
        <div
          class="backIcon d-md-flex d-none"
          role="button"
          routerLink="/pages/talent-connect/list">
          <span class="fa-solid fa-chevron-left"></span>
        </div>
        <div
          class="select-title d-flex justify-content-between align-items-center"
        >
          <div>
            <h5
              class="mb-0"
              tooltipPosition="top"
              pTooltip="Questions related to the application process are answered"
            >
              Easy Apply<i
                class="questiontooltip fa-solid fa-circle-question"
              ></i>
            </h5>
          </div>
          <div>
            <button class="how-it-works-button" (click)="openVideoPopup('')">
              How it works?<i class="fa-solid fa-play d-md-block d-none"></i>
            </button>
          </div>
        </div>
        <button
          type="button"
          title="Close Popup"
          class="btn p-button-primary btn-rounded mt-2"
          (click)="displayModal = true"
        >
          <i class="fa-solid fa-caret-down"></i>&nbsp;&nbsp;Filter
        </button>
      </div>
      <!-- <div class="col-md-3 mt-2 text-end desktop justify-content-end d-none d-md-flex"></div> -->
    </div>
  </div>
  <div class="card-body text-center flex-fill overflow-y-auto">
    <div class="row">
      <div>
        <div class="d-flex gap-2 justify-content-center align-items-center">
          <button
            type="button"
            class="p-2 px-4 mb-4 mt-3 rounded-lg"
            style="background-color: var(--uniprep-primary); color: white; border-radius: 8px;"
            routerLink="/pages/talent-connect/company-connect">
            Job Search
          </button>
          <button
            type="button"
            class="p-2 px-4 mb-4 mt-3 module-button" style="border-radius: 8px;"
            routerLink="/pages/talent-connect/company-tracker">
            Job Tracker
          </button>
        </div>
      </div>
      <div class="text-end">
        <span class="fw-bold">Total Job : {{ totalJobs }}</span>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 col-lg-4 mb-4" *ngFor="let job of jobListings" [routerLink]="['/pages/talent-connect/easy-apply', 1]">
          <div class="card-inside" style="border-radius: 10px; margin-bottom: 20px; transition: transform 0.3s; border: 1px solid gray;">
            <!-- Job Header -->
            <div class="card-body bg-white card-header-inside">
              <div class="row align-items-center w-100">
                <!-- Logo Column -->
                <div class="col-auto">
                  <img
                    src="assets/company-logo.png"
                    alt="Company Logo"
                    width="40"
                    height="40"
                    class="rounded"
                  />
                </div>

                <!-- Job Details Column -->
                <div class="col">
                  <h5 class="mb-1">{{ job.position }}</h5>
                  <p class="mb-0 text-orange">
                    {{ job.company }}
                    <span class="ms-1 text-primary" *ngIf="job.isVerified">
                      <i class="fas fa-check-circle"></i>
                    </span>
                  </p>
                  <p class="mb-0 text-warning" style="font-size: 10px">
                    You match {{ job.matchedSkills }} out of
                    {{ job.totalSkills }} skill requirements for this job
                  </p>
                </div>

                <!-- Share Button Column -->
                <div class="col-auto">
                  <button class="btn btn-link text-warning p-0">
                    <i class="fas fa-share-alt"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="m-2 border border-bottom-100"></div>
            <div class="card-body pt-0">
              <!-- Location -->
              <div class="d-flex mb-3">
                <div class="me-2 text-success">
                  <i class="fas fa-map-marker-alt"></i>
                </div>
                <div>
                  <p class="text-muted mb-0 small">Work Location</p>
                  <p class="mb-0 fw-medium">{{ job.location }}</p>
                </div>
              </div>

              <!-- Start Date and Company Size -->
              <div class="d-flex mb-3">
                <div class="me-2 text-primary">
                  <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="me-4">
                  <p class="text-muted mb-0 small">Start Date</p>
                  <p class="mb-0 fw-medium">{{ job.startDate }}</p>
                </div>

                <div class="me-2 text-secondary">
                  <i class="fas fa-users"></i>
                </div>
                <div>
                  <p class="text-muted mb-0 small">Company Size</p>
                  <p class="mb-0 fw-medium">{{ job.companySize }}</p>
                </div>
              </div>

              <!-- Work Arrangement and Employment Type -->
              <div class="d-flex mb-3">
                <div class="me-2 text-warning">
                  <i class="fas fa-building"></i>
                </div>
                <div class="me-4">
                  <p class="text-muted mb-0 small">Work Arrangement</p>
                  <p class="mb-0 fw-medium">{{ job.workArrangement }}</p>
                </div>

                <div class="me-2 text-danger">
                  <i class="fas fa-briefcase"></i>
                </div>
                <div>
                  <p class="text-muted mb-0 small">Employment Type</p>
                  <p class="mb-0 fw-medium">{{ job.employmentType }}</p>
                </div>
              </div>

              <!-- Salary Range -->
              <div class="d-flex">
                <div class="me-2 text-success">
                  <i class="fas fa-dollar-sign"></i>
                </div>
                <div>
                  <p class="text-muted mb-0 small">Salary Range</p>
                  <p class="mb-0 fw-medium">{{ job.salaryRange }}</p>
                </div>
              </div>
            </div>

            <!-- Posted Date -->
            <div class="card-footer bg-white text-end border-top-0">
              <small class="text-muted">Posted On : {{ job.postedDate }}</small>
            </div>
          </div>
      </div>
    </div>
  </div>
  <div class="card-footer border-0 bg-transparent">
    <div class="row d-flex align-items-center justify-content-between">
      <p-paginator
        *ngIf="totalJobs != 0"
        [rows]="pageSize"
        [totalRecords]="totalPitchDeckCount"
        [first]="(page - 1) * pageSize"
        (onPageChange)="pageChange($event)"
        [rowsPerPageOptions]="[50, 100, 300, 500, 1000]"
        [disabled]="totalPitchDeckCount <= pageSize"
      >
      </p-paginator>
    </div>
  </div>
</div>
<div [class]="displayModal ? 'p-4': ''">
  <p-dialog
    header="Filter"
    [(visible)]="displayModal"
    [modal]="true"
    [style]="{width: '70vw'}"
    [baseZIndex]="10000"
    [draggable]="false"
    [resizable]="false"
    [closeOnEscape]="true"
    styleClass="filter-modal">
    
    <div class="container-fluid p-3">
      <form (ngSubmit)="applyFilter()">
        <!-- Search Section -->
        <div class="mb-4">
          <div class="form-div fw-bold">Search</div>
          <input type="text" class="form-control w-100" placeholder="Search by Keyword">
        </div>
        
        <!-- First Row -->
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="form-div fw-bold">Position Title</div>
            <p-dropdown 
              [options]="positionTitles" 
              placeholder="Enter position title"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
          
          <div class="col-md-4">
            <div class="form-div fw-bold">Industry</div>
            <p-dropdown 
              [options]="industries" 
              placeholder="Select industry"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
          
          <div class="col-md-4">
            <div class="form-div fw-bold">Work Location</div>
            <p-dropdown 
              [options]="workLocations" 
              placeholder="Select work location"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
        </div>
        
        <!-- Second Row -->
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="form-div fw-bold">Work Type</div>
            <p-dropdown 
              [options]="workTypes" 
              placeholder="Select work type"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
          
          <div class="col-md-4">
            <div class="form-div fw-bold">Employment Type</div>
            <p-dropdown 
              [options]="employmentTypes" 
              placeholder="Select employment type"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
          
          <div class="col-md-4">
            <div class="form-div fw-bold">Salary Range</div>
            <p-dropdown 
              [options]="salaryRanges" 
              placeholder="Select salary range"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
        </div>
        
        <!-- Third Row -->
        <div class="row mb-4">
          <div class="col-md-6">
            <div class="form-div fw-bold">Experience Level</div>
            <p-dropdown 
              [options]="experienceLevels" 
              placeholder="Select experience level"
              styleClass="w-100" 
              [showClear]="true">
            </p-dropdown>
          </div>
        </div>
      </form>
    </div>
    
    <ng-template pTemplate="footer">
      <div class="d-flex flex-column gap-2">
        <button type="submit" class="btn btn-dark w-100" style="background-color: var(--uniprep-primary); border: none">Apply Filter</button>
        <button type="button" class="btn btn-link reset-filter-btn" (click)="resetFilter()">
          Reset Filter
        </button>
      </div>
    </ng-template>
  </p-dialog>
</div>
