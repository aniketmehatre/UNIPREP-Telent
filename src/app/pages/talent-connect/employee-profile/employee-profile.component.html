<div class="card readingcard h-100">
	<div class="card-header border-0 bg-transparent">
		<div class="row">
			<div class="col-md-12 d-flex gap-2 text-center">
				<div class="backIcon d-md-flex d-none" role="button" routerLink="/pages/talent-connect/list">
					<span class="fa-solid fa-chevron-left"></span>
				</div>
				<div class="select-title d-flex justify-content-between align-items-center">
					<div>
						<h5 class="mb-0" tooltipPosition="top" pTooltip="Questions related to the application process are answered">Employee Profile<i class="questiontooltip fa-solid fa-circle-question"></i></h5>
					</div>
					<div>
						<button class="how-it-works-button" (click)="openVideoPopup('')">How it works?<i class="fa-solid fa-play d-md-block d-none"></i></button>
					</div>
				</div>
			</div>
			<!-- <div class="col-md-3 mt-2 text-end desktop justify-content-end d-none d-md-flex"></div> -->
		</div>
	</div>
	<div class="card-body flex-fill overflow-y-auto">
		<div class="row h-100">
			<div class="col-md-8 col-lg-9 col-sm-7 mb-2 d-flex flex-fill h-100">
				<div class="card overflow-y-hidden">
					<div class="card-header bg-primary">
						<div class="rounded-top-4 text-start d-flex justify-content-between align-items-center">
							<h5 class="text-white mb-0 fw-medium">Edit your Profile</h5>
							<div class="d-flex gap-2">
								<button class="btn btn-secondary btn-rounded px-3 py-1" (click)="openProfileDialog(true)">Profile Sample</button>
								<button class="button-profile-top rounded-pill px-3 py-1" (click)="openProfileDialog(false)">Profile Preview</button>
							</div>
						</div>
					</div>
					<div class="card-body h-100 overflow-y-auto">
						<form [formGroup]="personalInfoForm">
							<div class="row">
								<!-- Photo Upload Section -->
								<div class="col-md-4">
									<div class="text-center mb-2 p-3 rounded-4" style="border: 1px solid lightgray">
										<div class="bg-light p-3 rounded-4" style="border: 1px dashed lightgray">
											<div class="position-relative mx-auto mb-3">
												<ng-container *ngIf="logo; else showSample">
													<img [src]="logo" styleClass="shadow-lg object-fit" style="width: 120px; height: 120px; object-fit: cover" class="rounded-circle" />
												</ng-container>
												<ng-template #showSample>
													<div class="bg-secondary rounded-pill overflow-hidden d-flex justify-content-center align-items-center rounded-circle" style="width: 120px; height: 120px;margin: auto;">
														<img src="uniprep-assets/images/avatar.webp" class="w-100 h-100" />
													</div>
												</ng-template>
											</div>

											<div class="d-flex justify-content-center gap-2 mb-2">
												<input name="image" type="file" (change)="onUploadPhoto($event)" accept="image/*" #fileUploadImage style="display: none" />
												<p-button label="Upload Photo" icon="pi pi-upload" styleClass="p-button-sm" (click)="fileUploadImage.click()" (mouseenter)="updateMessageBox('profile_image')" (mouseleave)="resetMessageBox()"></p-button>
												<p-button label="Remove Photo" icon="pi pi-times" (onClick)="onRemovePhoto()" styleClass="p-button-sm p-button-outlined"></p-button>
											</div>
										</div>
										<div class="d-flex align-items-center gap-2 mt-2">
											<span><i class="fa-solid fa-face-viewfinder fa-xl"></i></span>
											<p class="fw-medium text-small text-start d-block">You have to upload a close, straight faced photo with plain background.</p>
										</div>

										<div class="d-flex justify-content-center mt-2">
											<img src="/uniprep-assets/images/correctProfilePic.png" />
										</div>
									</div>
								</div>
								<div class="col-md-8">
									<h2 class="card-title mb-4 fw-bold">Personal Information</h2>
									<div class="row mb-3">
										<!-- Full Name -->
										<div class="col-md-6">
											<label for="fullName" class="form-label">Full Name <span class="text-danger">*</span></label>
											<div class="p-inputgroup">
												<input pInputText fluid id="fullName" formControlName="full_name" placeholder="Alexanne Stant" class="form-control" (focus)="updateMessageBox('full_name')" (mouseleave)="resetMessageBox()" />
											</div>
											<small class="text-danger" *ngIf="personalInfoForm.get('full_name')?.invalid && personalInfoForm.get('full_name')?.touched"> This field is mandatory </small>
										</div>

										<!-- Date of Birth -->
										<div class="col-md-6">
											<label for="dateOfBirth" class="form-label">Date of Birth<span class="text-danger">*</span></label>
											<p-datepicker id="dateOfBirth" formControlName="date_of_birth" dateFormat="dd-mm-yy" placeholder="DD/MM/YYYY" styleClass="w-100" (mouseenter)="updateMessageBox('date_of_birth')" (mouseleave)="resetMessageBox()" />
											<small class="text-danger" *ngIf="personalInfoForm.get('date_of_birth')?.invalid && personalInfoForm.get('date_of_birth')?.touched"> This field is mandatory </small>
										</div>
									</div>

									<div class="row mb-3">
										<!-- Gender -->
										<div class="col-md-6">
											<label for="gender" class="form-label">Gender <span class="text-danger">*</span></label>
											<p-select id="gender" formControlName="gender" [options]="genderOptions" placeholder="Select your gender" styleClass="w-100" (mouseenter)="updateMessageBox('gender')" (mouseleave)="resetMessageBox()"></p-select>
											<small class="text-danger" *ngIf="personalInfoForm.get('gender')?.invalid && personalInfoForm.get('gender')?.touched"> This field is mandatory </small>
										</div>

										<!-- Nationality -->
										<div class="col-md-6">
											<label for="nationality" class="form-label">Nationality<span class="text-danger">*</span></label>
											<p-select id="nationality" formControlName="nationality_id" [options]="nationalityList" placeholder="Select your nationality" styleClass="w-100" optionLabel="nationality_name" optionValue="id" [filter]="true" filterBy="nationality_name" [appendTo]="'body'" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('nationality_id')"></p-select>
											<small class="text-danger" *ngIf="personalInfoForm.get('nationality_id')?.invalid && personalInfoForm.get('nationality_id')?.touched"> This field is mandatory </small>
										</div>
									</div>

									<!-- Current Location -->
									<div class="row">
										<div class="col-12">
											<label for="location" class="form-label">Current Location<span class="text-danger">*</span> (City, Country)</label>
											<p-select id="location" formControlName="location_id" [options]="locations" [virtualScroll]="true" [virtualScrollItemSize]="50" placeholder="Select your current location" styleClass="w-100" optionLabel="work_location" optionValue="id" [filter]="true" filterBy="work_location" [appendTo]="'body'" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('location_id')"></p-select>
											<small class="text-danger" *ngIf="personalInfoForm.get('location_id')?.invalid && personalInfoForm.get('location_id')?.touched"> This field is mandatory </small>
										</div>
									</div>
								</div>
								<hr class="my-3" />
								<div class="card-body">
									<h2 class="card-title mb-1">Education Details</h2>
									<ng-container class="education" formArrayName="educationDetails">
										<ng-container *ngFor="let education of educationDetails.controls; let i = index" [formGroupName]="i">
											<div *ngIf="i > 0" class="d-flex justify-content-between">
												<h5 class="card-title">Education</h5>
												<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeEducation(i)" style="width: fit-content">
													<span><i class="fa-regular fa-trash fa-lg"></i></span>
												</button>
											</div>
											<div class="row mb-3">
												<!-- Highest Qualification -->
												<div class="col-md-6">
													<label for="highestQualification" class="form-label">Highest Qualification <span class="text-danger">*</span></label>
													<p-select id="highestQualification" formControlName="education_qualification_id" [options]="qualifications" placeholder="Select your highest qualification" styleClass="w-100" optionLabel="qualification_name" optionValue="id" [filter]="true" filterBy="qualification_name" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('education_qualification_id')"></p-select>
													<small class="text-danger" *ngIf="education.get('education_qualification_id')?.invalid && education.get('education_qualification_id')?.touched"> This field is mandatory </small>
												</div>

												<!-- University/Institution Name -->
												<div class="col-md-6">
													<label for="university" class="form-label">University / Institution Name <span class="text-danger">*</span></label>
													<div class="p-inputgroup">
														<input pInputText fluid id="university" formControlName="education_university_name" placeholder="Enter your university / institution Name" class="form-control" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('education_university_name')" />
													</div>
													<small class="text-danger" *ngIf="education.get('education_university_name')?.invalid && education.get('education_university_name')?.touched"> This field is mandatory </small>
												</div>
											</div>
											<div class="row mb-3">
												<!-- Field of Study / Major -->
												<div class="col-md-6">
													<label for="fieldOfStudy" class="form-label">Field of Study / Major <span class="text-danger">*</span></label>
													<p-select id="highestQualification" formControlName="education_field_id" [options]="fieldsOfStudy" placeholder="Select Field" styleClass="w-100" optionLabel="field_name" optionValue="id" [filter]="true" filterBy="field_name" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('education_field_id')"></p-select>
													<small class="text-danger" *ngIf="education.get('education_field_id')?.invalid && education.get('education_field_id')?.touched"> This field is mandatory </small>
												</div>

												<!-- Course Name -->
												<div class="col-md-6">
													<label for="courseName" class="form-label">Course Name <span class="text-danger">*</span></label>
													<div class="p-inputgroup">
														<input pInputText fluid id="courseName" formControlName="education_course_name" placeholder="Enter your course name" class="form-control" (mouseenter)="updateMessageBox('education_course_name')" (mouseleave)="resetMessageBox()" />
													</div>
													<small class="text-danger" *ngIf="education.get('education_course_name')?.invalid && education.get('education_course_name')?.touched"> This field is mandatory </small>
												</div>
											</div>
											<div class="row mb-3">
												<!-- Field of Study / Major -->
												<div class="col-md-6">
													<label for="fieldOfStudy" class="form-label">Graduation Year <span class="text-danger">*</span></label>
													<div class="p-inputgroup">
														<p-select id="highestQualification" formControlName="education_graduation_year_id" [options]="graduationYears" placeholder="Select Graduation Year" styleClass="w-100" optionLabel="graduation_year_name" optionValue="id" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('education_graduation_year_id')"></p-select>
													</div>
													<small class="text-danger" *ngIf="education.get('education_graduation_year_id')?.invalid && education.get('education_graduation_year_id')?.touched"> This field is mandatory </small>
												</div>

												<!-- Course Name -->
												<div class="col-md-6">
													<label for="courseName" class="form-label">GPA Percentage</label>
													<div class="p-inputgroup">
														<p-input-number id="courseName" formControlName="education_gpa_percentage" placeholder="Enter your GPA" class="w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('education_gpa_percentage')" />
													</div>
												</div>
											</div>
										</ng-container>
									</ng-container>
									<div class="row">
										<button class="w-full btn btn-primary" pButton (click)="addEducation()">Add Education Details &nbsp;<i class="fa fa-plus"></i></button>
									</div>
								</div>
								<hr class="my-3" />
								<div class="card-body">
									<h2 class="card-title mb-4">Work Experience</h2>
									<div class="row mb-3">
										<div class="col-md-12">
											<label for="highestQualification" class="form-label">Total Years of Experience</label><br />
											<p-select id="highestQualification" formControlName="total_years_of_experience" [options]="totalYearExperienceList" placeholder="Select total experience" styleClass="w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('total_years_of_experience')"></p-select>
											<small class="text-danger" *ngIf="personalInfoForm.get('total_years_of_experience')?.invalid && personalInfoForm.get('total_years_of_experience')?.touched"> This field is mandatory </small>
										</div>
									</div>
									<ng-container class="work-experience" formArrayName="work_experience" *ngIf="personalInfoForm?.get('total_years_of_experience')?.value !== 'Fresher'">
										<ng-container *ngFor="let experience of workExperience.controls; let i = index" [formGroupName]="i">
											<div class="d-flex justify-content-between">
												<h5 class="card-title">Work Experience Details</h5>
												<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeWorkExperience(i)">
													<span><i class="fa-regular fa-trash fa-lg"></i></span>
												</button>
											</div>
											<div class="row mb-3">
												<div class="col-md-6">
													<label for="highestQualification" class="form-label">Years of Experience</label><br />
													<p-select id="highestQualification" formControlName="years_of_experience" [options]="totalYearExperienceList" placeholder="Select total experience" styleClass="w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('years_of_experience')" (ngModelChange)="disableFieldsWhenClickFresher(experience, experience.get('years_of_experience')?.value == 'Fresher')"></p-select>
												</div>

												<!-- University/Institution Name -->
												<div class="col-md-6">
													<label for="university" class="form-label">Company Name</label>
													<div class="p-inputgroup">
														<input pInputText fluid id="university" formControlName="work_experience_company_name" placeholder="Enter your company" class="form-control" [disabled]="experience.get('years_of_experience')?.value == 'Fresher'" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('work_experience_company_name')" />
													</div>
												</div>
											</div>
											<div class="row mb-3">
												<!-- Field of Study / Major -->
												<div class="col-md-6">
													<label for="fieldOfStudy" class="form-label">Job Title</label>
													<p-select id="highestQualification" pTooltip="Not able to find option type in this field" [virtualScroll]="true" [virtualScrollItemSize]="50" formControlName="work_experience_job_title" [options]="jobTitles" placeholder="Select Job Title" styleClass="w-100 p-0" optionLabel="job_title" optionValue="job_title" [filter]="true" filterBy="job_title" [editable]="true" (mouseleave)="resetMessageBox()" [disabled]="experience.get('years_of_experience')?.value == 'Fresher'" (mouseenter)="updateMessageBox('work_experience_job_title')"></p-select>
												</div>

												<!-- Course Name -->
												<div class="col-md-6">
													<label for="courseName" class="form-label">Employment Type</label>
													<div class="p-inputgroup">
														<p-select id="highestQualification" formControlName="work_experience_employment_type" [options]="preferredEmploymentType" placeholder="Select employement type" styleClass="w-100" (mouseleave)="resetMessageBox()" [disabled]="experience.get('years_of_experience')?.value == 'Fresher'" (mouseenter)="updateMessageBox('work_experience_employment_type')"></p-select>
													</div>
												</div>
											</div>
											<div class="row mb-4">
												<!-- Duration Field -->
												<div class="col-md-6 mb-3">
													<label for="duration" class="form-label">Duration</label>
													<div class="d-block d-md-flex gap-2 w-full">
														<p-datepicker formControlName="work_experience_duration_from" size="small" placeholder="From Date" dateFormat="dd-mm-yy"   inputId="icondisplay"/> 
														<p-datepicker formControlName="work_experience_duration_to" size="small" placeholder="To Date" dateFormat="dd-mm-yy" inputId="icondisplay"/>
													</div>
													<div
													*ngIf="(experience.get('work_experience_duration_from')?.value && !experience.get('work_experience_duration_to')?.value) 
														 || (!experience.get('work_experience_duration_from')?.value && experience.get('work_experience_duration_to')?.value)"
													class="text-danger">
													Please select both from and to values.
												  </div>												</div>

												<!-- Salary Field -->
												<div class="col-md-6 mb-3">
													<label for="salary" class="form-label">Salary / Month</label>
													<div class="d-flex w-100 gap-2">
														<p-select [options]="currencies" styleClass="p-select p-component" optionLabel="currency_code" optionValue="id" placeholder="Select Currency" [filter]="true" filterBy="currency_code" appendTo="body" formControlName="work_experience_currency_id" [style]="{ width: '100px' }" [disabled]="experience.get('years_of_experience')?.value == 'Fresher'"> </p-select>
														<div class="flex-grow-1 me-2">
															<p-inputNumber id="salary" placeholder="Enter your salary/month" styleClass="p-inputtext w-100" [showButtons]="false" class="w-100" formControlName="work_experience_salary_per_month" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('work_experience_salary_per_month')" [disabled]="experience.get('years_of_experience')?.value == 'Fresher'"></p-inputNumber>
														</div>
													</div>
												</div>
											</div>

											<div class="row mb-4">
												<div class="col-md-12 mb-3">
													<div class="d-flex justify-content-between mb-1">
														<label for="responsibilities" class="form-label">Job Responsibilities</label>
														<div class="d-flex gap-2">
															<p-button type="button" icon="pi pi-refresh" (click)="experience.get('work_experience_job_responsibilities')?.setValue(null);"></p-button>
															<button class="text-small btn btn-success btn-rounded d-flex align-items-center gap-2" style="width: fit-content" (click)="generateAiSummary('joboverview', experience?.get('work_experience_job_title')?.value, experience?.get('work_experience_job_responsibilities'))"><i class="fa-solid fa-stars"></i>AI Generate</button>
														</div>
													</div>
													<p-editor [style]="{ height: '150px', maxHeight: 'auto' }" formControlName="work_experience_job_responsibilities" placeholder="Enter your Job Responsibilities & Key Achievements" (mouseenter)="showRecommendation('insight')" (mouseleave)="hideRecommendation()" #jobRepo/>
													<!-- <textarea pTextarea id="responsibilities" class="form-control w-100" placeholder="Enter your Job Responsibilities & Key Achievements" rows="5" maxlength="4000" formControlName="work_experience_job_responsibilities" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('work_experience_job_responsibilities')" #jobRepo></textarea> -->
													<small class="text-muted d-block text-end">{{ experience.get('work_experience_job_responsibilities')?.value?.length }}/4000</small>
												</div>

												<!-- Experience Letter Upload -->
												<div class="col-md-12 mb-3">
													<label class="form-label fw-medium">Experience Letter <span class="text-muted">(Optional)</span></label>
													<div class="upload-box" (click)="fileExperieceUpload.click()" [disabled]="experience.get('years_of_experience')?.value == 'Fresher'" (mouseenter)="updateMessageBox('work_experience_experience_letter')" (mouseleave)="resetMessageBox()">
														<div class="d-flex align-items-center justify-center-center flex-column mt-3">
															<i class="pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color fw-bold"></i>
															<div class="fw-bold">
																{{ experience.get("work_experience_experience_letter")?.value ? extractLastName(experience.get("work_experience_experience_letter")?.value) : "Upload your Experience Letter" }}
															</div>
														</div>
														<input type="file" [auto]="true" style="visibility: hidden" accept="application/pdf" [maxFileSize]="1000000" (change)="uploadFile(fileType.EXPERIENCE_LETTER, $event, i)" #fileExperieceUpload [disabled]="experience.get('years_of_experience')?.value == 'Fresher'" />
													</div>
												</div>
											</div>
										</ng-container>
									</ng-container>
									<div class="row">
										<button class="w-full btn btn-primary" (click)="addWorkExperience()" [disabled]="personalInfoForm?.get('total_years_of_experience')?.value == 'Fresher'">Add Work Experience Details &nbsp;<i class="fa fa-plus"></i></button>
									</div>
								</div>
								<hr class="my-3" />
								<div class="card-body">
									<h2 class="card-title mb-1">Career Prefrenences & Aspirations</h2>
									<div class="mb-2">
										<span class="text-danger fw-bold">Confused about your career?</span>
										<a (click)="routerBlankPage('/pages/job-tool/careerplannerlist')" class="px-1" role="button">Click here</a> to plan it!
									</div>
									<ng-container class="career-experience">
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Career Status<span class="text-danger">*</span></label>
												<p-select id="highestQualification" formControlName="career_preference_career_status" [options]="careerStatus" placeholder="Select Career Status" styleClass="w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_career_status')"></p-select>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_career_status')?.invalid && personalInfoForm.get('career_preference_career_status')?.touched"> This field is mandatory </small>
											</div>
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Job Title<span class="text-danger">*</span></label>
												<p-select id="highestQualification" pTooltip="Not able to find option type in this field" [virtualScroll]="true" [virtualScrollItemSize]="50"  formControlName="career_preference_job_title_id" [options]="jobTitles" placeholder="Select Job Title" styleClass="w-100" optionLabel="job_title" optionValue="job_title" [filter]="true" filterBy="job_title" [editable]="true" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_job_title_id')"></p-select>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_job_title_id')?.invalid && personalInfoForm.get('career_preference_job_title_id')?.touched"> This field is mandatory </small>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Career Interest / Industry<span class="text-danger">*</span></label>
												<p-multiSelect id="highestQualification" formControlName="career_preference_career_interest_id" [options]="careerInterests" placeholder="Enter career interest" styleClass="w-100" optionLabel="interest" optionValue="id" [filter]="true" filterBy="interest" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_career_interest_id')"></p-multiSelect>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_career_interest_id')?.invalid && personalInfoForm.get('career_preference_career_interest_id')?.touched"> This field is mandatory </small>
											</div>

											<!-- University/Institution Name -->
											<div class="col-md-6">
												<label for="university" class="form-label">Preferred Work Location<span class="text-danger">*</span></label>
												<div class="p-inputgroup">
													<p-multiSelect id="highestQualification" formControlName="career_preference_preferred_work_location_id" [options]="locations" [virtualScroll]="true" [virtualScrollItemSize]="50" placeholder="Select Your Location" styleClass="w-100" optionLabel="work_location" optionValue="id" [filter]="true" filterBy="work_location" [appendTo]="'body'"  (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_preferred_work_location_id')"></p-multiSelect>
												</div>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_preferred_work_location_id')?.invalid && personalInfoForm.get('career_preference_preferred_work_location_id')?.touched"> This field is mandatory </small>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Preferred Employement Type<span class="text-danger">*</span></label>
												<p-multiSelect id="highestQualification" formControlName="career_preference_preferred_employment_type" [options]="preferredEmploymentType" placeholder="Select Employement Type" styleClass="w-100"></p-multiSelect>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_preferred_employment_type')?.invalid && personalInfoForm.get('career_preference_preferred_employment_type')?.touched"> This field is mandatory </small>
											</div>

											<!-- University/Institution Name -->
											<div class="col-md-6">
												<label for="university" class="form-label">Preferred Workplace Type<span class="text-danger">*</span></label>
												<div class="p-inputgroup">
													<p-multiSelect id="highestQualification" formControlName="career_preference_preferred_workplace_type" [options]="preferredWorkplaceType" placeholder="Enter Workplace Type" styleClass="w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_preferred_workplace_type')" (ngModelChange)="handleValidationsForFields(personalInfoForm?.get('career_preference_willingness_to_relocate'), $event == 'Remote Work')"></p-multiSelect>
												</div>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_preferred_workplace_type')?.invalid && personalInfoForm.get('career_preference_preferred_workplace_type')?.touched"> This field is mandatory </small>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Willingness to Relocate?<span class="text-danger">*</span></label>
												<p-select
													id="highestQualification"
													formControlName="career_preference_willingness_to_relocate"
													[options]="[
														{ label: 'Yes', value: 'Yes' },
														{ label: 'No', value: 'No' }
													]"
													placeholder="Wiiling to relocate"
													styleClass="w-100"
													optionLabel="label"
													optionValue="value"
													(mouseleave)="resetMessageBox()"
													(mouseenter)="updateMessageBox('career_preference_willingness_to_relocate')"
													[disabled]="personalInfoForm.get('career_preference_preferred_workplace_type')?.value == 'Remote Work'"></p-select>
												<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_willingness_to_relocate')?.invalid && personalInfoForm.get('career_preference_willingness_to_relocate')?.touched"> This field is mandatory </small>
											</div>
											<!-- University/Institution Name -->
											<div class="col-md-6">
												<label for="university" class="form-label">Expected Salary<span class="text-danger">*</span></label>
												<div class="d-flex w-100 gap-2">
													<p-select [options]="currencies" styleClass="p-select p-component" optionLabel="currency_code" optionValue="id" placeholder="Select" [filter]="true" filterBy="currency_code" formControlName="career_preference_currency_id" [style]="{ width: '100px' }" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_currency_id')"> </p-select>
													<div class="flex-grow-1 me-2">
														<p-inputNumber id="salary" placeholder="Enter your salary/month" styleClass="p-inputtext w-100" [showButtons]="false" class="w-100" formControlName="career_preference_expected_salary"></p-inputNumber>
													</div>
												</div>
												<small class="text-danger" *ngIf="(personalInfoForm.get('career_preference_expected_salary')?.invalid && personalInfoForm.get('career_preference_expected_salary')?.touched) || (personalInfoForm.get('career_preference_currency_id')?.invalid && personalInfoForm.get('career_preference_currency_id')?.touched)"> This field with currency is mandatory </small>
											</div>
										</div>
									</ng-container>
								</div>
								<hr />
								<div class="row">
									<div class="col-12">
										<h2 class="card-title mb-1">Certifications & Achievements</h2>
										<div class="mb-2">
											<div class="mb-2">
												<span class="text-danger fw-bold">Dont have any certificates yet?</span>
												<a (click)="routerBlankPage('/pages/modules/learning-hub')" class="px-1" role="button">Click here</a>
												to plan it!
											</div>
										</div>
										<label class="form-label mb-2">Professional / online Certifications</label>
										<ng-container class="education mb-3" formArrayName="certifications">
											<ng-container *ngFor="let certificate of certifications.controls; let i = index" [formGroupName]="i">
												<div class="row mb-2 align-items-center">
													<div class="col-md-6">
														<input pInputText fluid class="form-control" placeholder="Enter certification name" class="w-100" formControlName="certifications_certificate_name" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('certifications_certificate_name')" />
													</div>
													<div class="col position-relative">
														<button class="btn btn-light d-flex align-items-center justify-content-center w-100 border border-dash p-2" (click)="certificateFile.click()" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('certifications_certificate_file')">
															<i class="pi pi-upload me-2"></i>
															{{ certificate.get("certifications_certificate_file")?.value ? extractLastName(certificate.get("certifications_certificate_file")?.value) : "Upload certificate" }}
														</button>
														<input type="file" accept="application/pdf" (change)="uploadFile(fileType.CERTIFICATIONS, $event, i)" style="visibility: hidden; position: absolute" #certificateFile />
													</div>
													<div class="col-md-1 d-flex justify-content-center">
														<button class="btn btn-outline-primary d-flex align-items-center justify-content-center p-2" (click)="addCertifications()">
															<i class="pi pi-plus"></i>
														</button>
													</div>
													<div *ngIf="i != 0" class="col-md-1 d-flex justify-content-center">
														<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeCertification(i)">
															<span><i class="fa-regular fa-trash fa-lg"></i></span>
														</button>
													</div>
												</div>
											</ng-container>
										</ng-container>
										<ng-container class="education" formArrayName="acheivements">
											<label class="form-label mb-2">Achievement Name</label>
											<ng-container *ngFor="let certificate of achievements.controls; let i = index" [formGroupName]="i">
												<div class="row mb-2 align-items-center">
													<div class="col-md-6">
														<input pInputText fluid class="form-control w-100" placeholder="Enter Achievement Name" formControlName="certifications_achievement_name" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('certifications_achievement_name')" />
													</div>
													<div class="col position-relative">
														<button class="btn btn-light d-flex align-items-center justify-content-center w-100 border p-2" (click)="acheivementFile.click()" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('certifications_achievement_file')">
															<i class="pi pi-upload me-2"></i>
															{{ certificate.get("certifications_achievement_file")?.value ? extractLastName(certificate.get("certifications_achievement_file")?.value) : "Upload Supporting Document" }}
														</button>
														<input type="file" accept="application/pdf" (change)="uploadFile(fileType.ACHIEVEMENTS, $event, i)" style="visibility: hidden; position: absolute" #acheivementFile />
													</div>
													<div class="col-md-1 d-flex justify-content-center">
														<button class="btn btn-outline-primary d-flex align-items-center justify-content-center p-2" (click)="addAcheivements()">
															<i class="pi pi-plus"></i>
														</button>
													</div>
													<div *ngIf="i != 0" class="col-md-1 d-flex justify-content-center">
														<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeAchievement(i)">
															<span><i class="fa-regular fa-trash fa-lg"></i></span>
														</button>
													</div>
												</div>
											</ng-container>
										</ng-container>
										<hr class="my-4" />
									</div>
								</div>
								<div class="card-body">
									<h2 class="card-title mb-1">Addtional Details</h2>
									<div class="mb-2">
										<span class="text-danger fw-bold">Want to learn a new language?</span>
										<a (click)="routerBlankPage('/pages/language-hub/languages')" class="px-1">Click here</a> to plan it!
									</div>
									<ng-container class="work-experience">
										<div class="row">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Language known<span class="text-danger">*</span></label>
											</div>
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Language Proficiency<span class="text-danger">*</span></label>
											</div>
										</div>
										<ng-container formArrayName="languages">
											<div class="row mb-3" *ngFor="let language of languages.controls; let i = index" [formGroupName]="i">
												<div class="col-md-6">
													<p-select id="highestQualification" formControlName="languages_language_id" [options]="languagelist" placeholder="Enter know language" styleClass="w-100" optionLabel="language" optionValue="id" [filter]="true" filterBy="language" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('languages_language_id')"></p-select>
													<small class="text-danger" *ngIf="language.get('languages_language_id')?.invalid && language.get('languages_language_id')?.touched"> This field is mandatory </small>
												</div>
												<div class="col-md-6">
													<div class="row">
														<div class="col">
															<p-select id="highestQualification" formControlName="languages_proficiency" [options]="languageProficiency" placeholder="Enter language proficiency" styleClass="w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('languages_proficiency')"></p-select>
															<small class="text-danger" *ngIf="language.get('languages_proficiency')?.invalid && language.get('languages_proficiency')?.touched"> This field is mandatory </small>
														</div>
														<div *ngIf="i !== 0" class="col-md-2">
															<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeLanguage(i)">
																<span><i class="fa-regular fa-trash fa-lg"></i></span>
															</button>
														</div>
													</div>
												</div>
											</div>
										</ng-container>
										<div class="row mb-3">
											<button class="w-full btn btn-primary" (click)="addLanguage()">Add More Language&nbsp;<i class="fa fa-plus"></i></button>
										</div>
										<div class="row mb-3">
											<div class="col-md-12">
												<label for="highestQualification" class="form-label">Hobbies & Interests</label>
												<input pInputText fluid id="highestQualification" formControlName="languages_hobby_id" placeholder="Enter if any hobbies and interests" class="form-control w-100" />
											</div>
										</div>
									</ng-container>
								</div>
								<hr />
								<div class="card-body">
									<h2 class="card-title mb-1">Key Strengths & Professional Traits</h2>
									<div class="mb-2">
										<span class="text-danger fw-bold">Showcase your skills and strengths</span>
										<a (click)="routerBlankPage('/pages/modules/skill-mastery')" class="px-1">Click here</a> to plan it!
									</div>
									<ng-container class="work-experience">
										<div class="row mb-3">
											<div class="col-md-12">
												<div class="d-flex justify-content-between">
													<label for="highestQualification" class="form-label">What sets you apart in your industry?</label>
													<div class="d-flex gap-2">
														<p-button type="button" icon="pi pi-refresh" (click)="this.personalInfoForm.get('career_preference_set_industry_apart')?.setValue(null);"></p-button>
														<button class="text-small btn btn-success btn-rounded d-flex align-items-center gap-2" style="width: fit-content" (click)="generateAiSummary('joboverview', personalInfoForm?.get('career_preference_job_title_id')?.value, personalInfoForm?.get('career_preference_set_industry_apart'))"><i class="fa-solid fa-stars"></i>AI Generate</button>
													</div>
												</div>
												<div class="position-relative">
													<p-editor [style]="{ height: '150px', maxHeight: 'auto' }" formControlName="career_preference_set_industry_apart" placeholder="Enter your sets you apart in your industry" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_set_industry_apart')" #keyResponsibility/>
													<small class="text-muted d-block text-end">{{ personalInfoForm.get('career_preference_set_industry_apart')?.value?.length }}/4000</small>
												</div>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Soft skills</label>
												<p-multi-select pInputText fluid id="highestQualification" formControlName="career_preference_soft_skill_id" [options]="softSkills" optionValue="id" optionLabel="soft_skill" placeholder="Enter Soft Skills" class="form-control p-1 w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_soft_skill_id')"></p-multi-select>
											</div>
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Your top professional strength</label>
												<p-select id="highestQualification" formControlName="career_preference_professional_strength_id" [options]="professionalStrengths" placeholder="Enter know language" styleClass="w-100" optionLabel="strength" optionValue="id" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_professional_strength_id')"></p-select>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Have a you solved a real-world challenge in your feilds?</label>
												<div class="position-relative">
													<textarea pTextarea id="university" formControlName="career_preference_real_world_challenge" placeholder="Have a you solved a real-world challenge?" rows="5" maxLength="200" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_real_world_challenge')" #challenges></textarea>
													<small class="text-muted d-block text-end">{{ challenges.value?.length }}/200</small>
												</div>
											</div>
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Have you taken on leadership roles?</label>
												<textarea pTextarea id="university" formControlName="career_preference_leadership_experience" placeholder="Have you taken on leadership roles?" class="form-control w-100" (mouseleave)="resetMessageBox()" rows="5" (mouseenter)="updateMessageBox('career_preference_leadership_experience')" #leaderShip></textarea>
												<small class="text-muted d-block text-end">{{ leaderShip.value?.length }}/500</small>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-12">
												<label for="highestQualification" class="form-label">One quality others admire most about you?</label>
												<div class="position-relative">
													<textarea pTextarea id="responsibilities" formControlName="career_preference_admired_quality" class="form-control w-100" placeholder="Enter one quality others admire most about you" rows="4" maxlength="500" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_admired_quality')" #admiredQuality></textarea>
													<small class="text-muted d-block text-end">{{ admiredQuality.value?.length }}/500</small>
												</div>
											</div>
										</div>
									</ng-container>
								</div>
								<hr />
								<div class="card-body">
									<h2 class="card-title mb-3">Professional Networking & Online Presence</h2>
									<ng-container class="work-experience">
										<div class="row mb-3">
											<div class="col-md-12">
												<label for="highestQualification" class="form-label">LinkedIn Profile<span class="text-danger">*</span></label>
												<input pInputText fluid id="university" formControlName="networking_linkedin_profile" placeholder="Linkedin Profile Link" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('networking_linkedin_profile')" />
												<small class="text-danger" *ngIf="personalInfoForm.get('networking_linkedin_profile')?.invalid && personalInfoForm.get('networking_linkedin_profile')?.touched"> This field is mandatory with valid url </small>
											</div>
										</div>
										<div class="row mb-3">
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Social Media</label>
											</div>
											<div class="col-md-6">
												<label for="highestQualification" class="form-label">Provide the link</label>
											</div>
										</div>
										<ng-container formArrayName="networking_social_media">
											<div class="row mb-3" *ngFor="let experience of socialMedia.controls; let i = index" [formGroupName]="i">
												<div class="col-md-6">
													<p-select id="highestQualification" formControlName="networking_social_media" [options]="socialMedias" placeholder="Select any social media platform" styleClass="w-100" (mouseleave)="resetMessageBox()" (ngModelChange)="changeSocialMedia($event)" (mouseenter)="updateMessageBox('networking_social_media')" [optionDisabled]="isDisabled">
														<ng-template let-socialMedia #item>
															<span>{{ socialMedia }}&nbsp;<span *ngIf="selectedSocialMedias?.includes(socialMedia)">(Selected)</span></span>
														</ng-template>
													</p-select>
													<small class="text-danger" *ngIf="experience.get('networking_social_media')?.invalid && experience.get('networking_social_media')?.touched"> This field is mandatory </small>
												</div>
												<div class="col-md-6">
													<div class="row">
														<div class="col-md-10">
															<input pInputText fluid id="university" formControlName="networking_social_media_link" placeholder="Social media link" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('networking_social_media_link')" />
														</div>
														<div class="col-md-2">
															<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeSocialMedia(i); removeSelectedSocialMedia(experience.get('networking_social_media')?.value)" style="width: fit-content">
																<span><i class="fa-regular fa-trash fa-lg"></i></span>
															</button>
														</div>
													</div>
												</div>
											</div>
										</ng-container>
										<div class="row mb-3">
											<button class="w-full btn btn-primary" (click)="addSocialMedia()">Add more Social media&nbsp;<i class="fa fa-plus"></i></button>
										</div>
										<div class="row mb-3">
											<div class="col-md-12">
												<label for="highestQualification" class="form-label">Personal Website</label>
												<input pInputText fluid id="university" formControlName="networking_personal_website" placeholder="Website link" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('networking_personal_website')" />
												<small class="text-danger" *ngIf="personalInfoForm.get('networking_personal_website')?.invalid && personalInfoForm.get('networking_personal_website')?.touched"> This field is valid url </small>
											</div>
										</div>
									</ng-container>
								</div>
								<hr />
								<div class="card-body">
									<h2 class="card-title mb-3">Achievements & Media</h2>
									<div class="mb-2">
										<span class="text-danger fw-bold">Don't have a resume </span>
										<a class="text-primary" (click)="routerBlankPage('/pages/job-tool/cv-builder')">Click here</a> to create one!
									</div>
									<div class="row justify-content-center mt-3">
										<div class="upload-section text-center mb-4 py-2" style="border: 1px dashed lightgray">
											<h4>{{ personalInfoForm.get("career_preference_cv_filename")?.value ? extractLastName(personalInfoForm.get("career_preference_cv_filename")?.value) : "Upload CV / Resume" }}</h4>
											<button pButton label="UPLOAD" class="p-button-primary rounded-pill px-5 py-2" (click)="fileUpload.click()" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_cv_filename')"></button>
											<div class="text-muted mt-2">Supported Formats: doc, docx, pdf upto 2 MB</div>
											<input type="file" #fileUpload style="visibility: hidden" (change)="uploadFile(fileType.CV, $event, 0)" accept="application/pdf" />
											<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_cv_filename')?.invalid && personalInfoForm.get('career_preference_cv_filename')?.touched"> This field is mandatory </small>
										</div>
									</div>
									<div class="row w-100 justify-content-center">
										<div class="col-md-6 mb-3">
											<div class="border rounded p-3">
												<h4 class="mb-3">Introduction Video Upload</h4>
												<small class="text-muted">(90-120 seconds)</small>
												<input pInputText fluid placeholder="Provide the video link" class="form-control mt-2" formControlName="career_preference_video_link" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_video_link')" />
											</div>
											<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_video_link')?.invalid && personalInfoForm.get('career_preference_video_link')?.touched"> This field is valid url </small>
										</div>

										<div class="col-md-6 mb-3">
											<div class="border rounded p-3">
												<h4 class="mb-3">Portfolio Upload</h4>
												<small class="text-muted">(For Designers, Writers, Developers)</small>
												<div class="input-group mt-2">
													<input pInputText fluid placeholder="Provide the portfolio link" class="form-control" formControlName="career_preference_portfolio_upload_link" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('career_preference_portfolio_upload_link')" />
													<!-- <button pButton label="UPLOAD"
                                                        class="p-button-secondary ms-2"></button> -->
												</div>
											</div>
											<small class="text-danger" *ngIf="personalInfoForm.get('career_preference_portfolio_upload_link')?.invalid && personalInfoForm.get('career_preference_portfolio_upload_link')?.touched"> This field is valid url </small>
										</div>
									</div>
								</div>
								<hr class="my-3" />
								<div class="card-body">
									<h2 class="card-title mb-3">Reference & Endorsement</h2>
									<ng-container class="work-experience" formArrayName="academicReferences">
										<ng-container *ngFor="let academic of academicReferences.controls; let i = index" [formGroupName]="i">
											<div class="d-flex justify-content-between">
												<h5 class="card-title mb-1">Academic Reference</h5>
												<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeAcademicReference(i)">
													<span><i class="fa-regular fa-trash fa-lg"></i></span>
												</button>
											</div>
											<div class="row mb-3">
												<div class="col-md-4">
													<label for="highestQualification" class="form-label"
														>College Name
														<!-- <span class="text-danger">*</span> -->
													</label>
													<input pInputText fluid id="university" formControlName="references_college_name" placeholder="Enter the reference college name" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('references_college_name')" />
													<small class="text-danger" *ngIf="academic.get('references_college_name')?.invalid && academic.get('references_college_name')?.touched"> This field is mandatory </small>
												</div>
												<div class="col-md-4">
													<label for="highestQualification" class="form-label"
														>Name
														<!-- <span class="text-danger">*</span> -->
													</label>
													<input pInputText fluid id="university" formControlName="references_reference_name" placeholder="Enter the reference name" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('references_reference_name')" />
													<small class="text-danger" *ngIf="academic.get('references_reference_name')?.invalid && academic.get('references_reference_name')?.touched"> This field is mandatory </small>
												</div>
												<div class="col-md-4">
													<label for="highestQualification" class="form-label"
														>Desigination
														<!-- <span class="text-danger">*</span> -->
													</label>
													<input pInputText fluid id="university" formControlName="references_designation" placeholder="Enter the reference desigination" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('references_designation')" />
													<small class="text-danger" *ngIf="academic.get('references_designation')?.invalid && academic.get('references_designation')?.touched"> This field is mandatory </small>
												</div>
											</div>
											<div class="row mb-3">
												<!-- <div class="col-md-6">
													<label for="highestQualification" class="form-label"
														>Phone Number
														<span class="text-danger">*</span>
													</label>
													<p-inputNumber id="university" [useGrouping]="false" placeholder="Enter the reference phone number" styleClass="p-inputtext w-100" [showButtons]="false" class="w-100" formControlName="references_phone_number" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('references_phone_number')"></p-inputNumber>
													<small class="text-danger" *ngIf="academic.get('references_phone_number')?.invalid && academic.get('references_phone_number')?.touched"> This field is valid phone number </small>
												</div> -->
												<div class="col-md-12">
													<label for="highestQualification" class="form-label"
														>Email
														<!-- <span class="text-danger">*</span> -->
													</label>
													<input pInputText fluid id="university" formControlName="references_email" placeholder="Enter the reference email" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('references_email')" />
													<small class="text-danger" *ngIf="academic.get('references_email')?.invalid && academic.get('references_email')?.touched"> This field is valid email </small>
												</div>
											</div>
										</ng-container>
										<div class="row mb-3">
											<button class="w-full btn btn-primary" (click)="addAcademicReference()">Add Academic Reference&nbsp;<i class="fa fa-plus"></i></button>
										</div>
									</ng-container>
									<ng-container formArrayName="professional_references">
										<ng-container class="work-experience" *ngFor="let reference of professionalReferences.controls; let i = index" [formGroupName]="i">
											<div class="d-flex justify-content-between">
												<h5 class="card-title my-3">Professional Reference</h5>
												<button class="btn btn-outline-danger d-flex align-items-center justify-content-center px-3 py-2" (click)="removeProfessionalReference(i)">
													<span><i class="fa-regular fa-trash fa-lg"></i></span>
												</button>
											</div>
											<div class="row mb-3">
												<div class="col-md-4">
													<label for="highestQualification" class="form-label">Company Name</label>
													<input pInputText fluid id="university" formControlName="references_company_name" placeholder="Enter the reference company name" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('references_company_name')" />
												</div>
												<div class="col-md-4">
													<label for="highestQualification" class="form-label">Name</label>
													<input pInputText fluid id="university" formControlName="references_reference_name" placeholder="Enter the reference name" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('pro_references_reference_name')" />
												</div>
												<div class="col-md-4">
													<label for="highestQualification" class="form-label">Desigination</label>
													<input pInputText fluid id="university" formControlName="references_designation" placeholder="Enter the reference desigination" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('pro_references_designation')" />
												</div>
											</div>
											<div class="row mb-3">
												<!-- <div class="col-md-6">
													<label for="highestQualification" class="form-label">Phone Number</label>
													<p-inputNumber id="university" [useGrouping]="false" placeholder="Enter the reference phone number" styleClass="p-inputtext w-100" [showButtons]="false" class="w-100" formControlName="references_phone_number" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('pro_references_phone_number')"></p-inputNumber>
													<small class="text-danger" *ngIf="reference.get('references_phone_number')?.invalid && reference.get('references_phone_number')?.touched"> This field is valid phone number </small>
												</div> -->
												<div class="col-md-12">
													<label for="highestQualification" class="form-label">Email</label>
													<input pInputText fluid id="university" formControlName="references_email" placeholder="Enter the reference email" class="form-control w-100" (mouseleave)="resetMessageBox()" (mouseenter)="updateMessageBox('pro_references_email')" />
													<small class="text-danger" *ngIf="reference.get('references_email')?.invalid && reference.get('references_email')?.touched"> This field is valid email </small>
												</div>
											</div>
										</ng-container>
										<div class="row mb-3">
											<button class="w-full btn btn-primary" (click)="addProfessionalReference()">Add Professional Reference&nbsp;<i class="fa fa-plus"></i></button>
										</div>
									</ng-container>
									<h5 class="card-title my-3">Add Note</h5>
									<div class="row mb-3">
										<div class="position-relative">
											<p-editor [style]="{ height: '150px', maxHeight: 'auto' }" formControlName="additional_notes" placeholder="Additional Information" #additionalNotes/>
											<!-- <textarea pTextarea id="responsibilities" formControlName="additional_notes" class="form-control w-100" placeholder="Additional Information if any" rows="5" maxlength="500" #additionalNotes></textarea> -->
											<small class="text-muted d-block text-end">{{ personalInfoForm.get('additional_notes')?.value?.length }}/5000</small>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="col-md-4 col-lg-3 col-sm-5 d-flex flex-fill h-100">
				<div class="card border-secondary">
					<div class="card-body d-flex flex-column justify-content-between overflow-y-auto">
						<div class="d-flex gap-2" style="max-height: 50%;">
							<div>
								<img src="uniprep-assets/images/mascot.webp" width="50" alt="icon" />
							</div>
							<div class="message-box d-flex text-start text-truncate text-wrap overflow-y-auto" style="max-height: 100%;">
								<p class="mb-0 fw-medium">
									{{ currentMessage }}
								</p>
							</div>
						</div>
						<div>
							<div class="card card-inside" style="border-radius: 10px; transition: transform 0.3s; border: 1px solid #e9ecef" [style.border]="true ? '1px solid #FDA172' : '1px solid #e9ecef'">
								<div class="card-body">
									<div class="row mb-3">
										<div class="col-xl-3 col-lg-3 col-md-3 col-sm-12 col-12 d-flex align-items-center">
											<div class="w-100 h-100">
												<img [src]="logo ? logo : 'uniprep-assets/images/avatar.webp'" alt="Profile Image" class="rounded-3" style="object-fit: fill; width: 100%; height: 100%;"/>
											</div>
										</div>
										<div class="col-9 text-start">
											<div class="d-flex justify-content-between text-start">
												<div (mouseenter)="updateMessageBox('full_name')" (mouseleave)="resetMessageBox()">
													<span class="fw-bold">{{ personalInfoForm.get("full_name")?.value || "-" }}</span>
													<i *ngIf="true" class="fas fa-check-circle ms-1" style="color: #4285f4"></i>
												</div>
												<a style="color: #fda172">
													<i class="fa-regular fa-share-alt"></i>
												</a>
											</div>
											<div style="font-size: 12px" class="text-start">Profile Updated On 18-02-2025</div>
											<div class="mt-2 text-start d-flex justify-content-between align-items-center">
												<div>
													<small>Profile Completion: {{ profileCompletion }}%</small>
													<p-progressBar [value]="profileCompletion" [showValue]="false" [style]="{ height: '6px', color: 'var(--uniprep-secondary)' }" styleClass="text-secondary"></p-progressBar>
												</div>
												<button class="btn btn-sm" style="background-color: #94c973; color: white; font-size: 0.8rem; border-radius: 20px">
													{{ true ? "Shortlisted" : "Shortlist" }}
												</button>
											</div>
										</div>
									</div>

									<!-- Open Positions -->
									<div class="row text-start">
										<div class="col-12 mb-3">
											<div class="d-flex align-items-start gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-briefcase" style="color: #0052b4"></i>
												</div>
												<div class="overflow-hidden">
													<p class="text-muted text-small">Desired Job Title</p>
													<p class="fw-semibold text-small text-truncate">
														{{ personalInfoForm?.get("career_preference_job_title_id")?.value || "-" }}
													</p>
												</div>
											</div>
										</div>
										<div class="col-6 mb-3">
											<div class="d-flex align-items-start gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-person-walking-luggage" style="color: #f0780e"></i>
												</div>
												<div class="overflow-hidden">
													<p class="text-muted text-small">Employment Type</p>
													<p class="fw-semibold text-small text-truncate">
														{{ personalInfoForm?.get("career_preference_preferred_employment_type")?.value ? personalInfoForm?.get("career_preference_preferred_employment_type")?.value : "-" }}
													</p>
												</div>
											</div>
										</div>
										<div class="col-6 mb-3">
											<div class="d-flex align-items-start gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-car-building me-2" style="color: #000000"></i>
												</div>
												<div class="overflow-hidden">
													<p class="text-muted text-small">Work Arrangement</p>
													<p class="fw-semibold text-small text-truncate">
														{{ personalInfoForm?.get("career_preference_preferred_workplace_type")?.value ? personalInfoForm?.get("career_preference_preferred_workplace_type")?.value : "-" }}
													</p>
												</div>
											</div>
										</div>
										<div class="col-6 mb-3">
											<div class="d-flex align-items-center gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-location-dot" style="color: #9bc329"></i>
												</div>
												<div class="overflow-hidden">
													<p class="text-muted text-small">Current Location</p>
													<p class="fw-semibold text-small text-truncate">{{ personalInfoForm?.get("location_id")?.value ? getListValue(locations, personalInfoForm?.get("location_id")?.value, "work_location") : "-" }}</p>
												</div>
											</div>
										</div>

										<div class="col-6 mb-3">
											<div class="d-flex align-items-start gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-industry" style="color: #3f4c83"></i>
												</div>
												<div class="overflow-hidden">
													<p class="text-muted text-small">Interested Industry</p>
													<p class="fw-semibold text-small text-truncate">
														{{ personalInfoForm?.get("career_preference_career_interest_id")?.value ? getListValue(careerInterests, personalInfoForm?.get("career_preference_career_interest_id")?.value, "interest") : "-" }}
													</p>
												</div>
											</div>
										</div>
										<div class="col-6">
											<div class="d-flex align-items-start gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-money-bill" style="color: #c8b100"></i>
												</div>

												<div class="overflow-hidden">
													<p class="text-muted text-small">Expected Salary</p>
													<p class="fw-semibold text-small text-truncate">
														{{ personalInfoForm?.get("career_preference_expected_salary")?.value ? getListValue(currencies, personalInfoForm?.get("career_preference_currency_id")?.value, "currency_code") + " " + personalInfoForm?.get("career_preference_expected_salary")?.value + "/Month" : "-" }}
													</p>
												</div>
											</div>
										</div>
										<div class="col-6">
											<div class="d-flex align-items-start gap-2">
												<div style="max-width: 20px; width: 100%">
													<i class="fa-solid fa-file-check" style="color: #707070"></i>
												</div>

												<div class="overflow-hidden">
													<p class="text-muted text-small">Total Experience</p>
													<p class="fw-semibold text-small text-truncate">
														{{ personalInfoForm?.get("total_years_of_experience")?.value ? personalInfoForm?.get("total_years_of_experience")?.value : "-" }}
													</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<p class="text-center text-muted text-small fw-semibold mt-2">Your profile card as viewed by a company</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="card-footer bg-white">
		<div class="row align-items-center">
			<div class="col-md-10">
				<div class="d-flex align-items-center gap-2">
					<span class="h6 mb-0 flex-shrink-0 uniprep-secondary fw-bold">Profile: {{ profileCompletion }}%</span>
					<div class="w-100">
						<p-progressBar [style]="{ height: '12px' }" color="#f0780e" styleClass="rounded-pill" [showValue]="false" [value]="profileCompletion"></p-progressBar>
					</div>
				</div>
			</div>
			<div class="col-md-2 d-flex justify-content-end">
				<button pButton type="button" (click)="onSubmit()" class="btn btn-primary btn-rounded p-1 ps-4 mt-1">
					<span class="me-2">{{ this.profileId ? "Update Profile" : "Create Profile" }}</span
					><span class="btn-icon px-2 py-2"><i class="pi pi-check text-white"></i></span>
				</button>
			</div>
		</div>
	</div>
</div>
