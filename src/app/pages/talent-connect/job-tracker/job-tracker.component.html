<div class="card readingcard overflow-auto overflow-md-auto">
	<div class="card-header border-0 bg-transparent">
		<div class="row">
			<div class="col-md-12 d-flex gap-2 text-center">
				<div class="backIcon d-md-flex d-none" role="button" routerLink="/pages/talent-connect/list">
					<span class="fa-solid fa-chevron-left"></span>
				</div>
				<div class="select-title d-flex justify-content-between align-items-center">
					<div>
						<h5 class="mb-0" tooltipPosition="top" pTooltip="Questions related to the application process are answered">Job Tracker<i class="questiontooltip fa-solid fa-circle-question"></i></h5>
					</div>
					<div>
						<button class="how-it-works-button" (click)="openVideoPopup(howItWorksVideoLink)">How it works?<i class="fa-solid fa-play d-md-block d-none"></i></button>
					</div>
				</div>
				<button type="button" title="Close Popup"
				class="btn btn-primary btn-rounded mt-2" (click)="displayModal = true;"><i class="fa-solid fa-caret-down"></i>&nbsp;&nbsp;Report
		       </button>
			</div>
			<!-- <div class="col-md-3 mt-2 text-end desktop justify-content-end d-none d-md-flex"></div> -->
		</div>
	</div>
  
	<div class="card-body text-center flex-fill h-100" >
		<div class="row mb-2">
			<div class="d-flex flex-fill gap-2 justify-content-center align-items-center">
				<button  pButton class="btn border bg-white px-3 py-3" style="color: var(--uniprep-primary)" routerLink="/pages/talent-connect/easy-apply">Job Search</button>
				<button pButton class="btn border bg-primary px-3 py-3 text-white">Job Tracker</button>
			</div>
		</div>
		<div class="row gx-3">
		  <!-- Sidebar with job list -->
		  <div class="col-lg-3 col-md-3 col-12 border-end mb-3 mb-md-0" >
			<uni-job-list (emitId)="onClickJobId($event)"></uni-job-list>
		  </div>
	  
		  <!-- Main content with job details and chat -->
		  <div class="col-lg-9 col-md-9 col-12">
			<div class="row g-3" *ngIf="selectedJobId; else showEmptyContainer">
			  <div class="col-lg-8 col-md-7 col-12" *ngIf="showInfo">
				<div class="job-details-container">
				  <uni-job-details (closeInfo)="toggleInfo()" [showInfo]="true" [jobDetails]="jobDetails"></uni-job-details>
				</div>
			  </div>
			  <div class="col h-100" [ngClass]="{'col-lg-4 col-md-12': showInfo, 'col-lg-12 col-md-12': !showInfo}">
				<uni-job-chat-ui (openInfo)="toggleInfo()" [showInfo]="showInfo" [jobDetails]="jobDetails" style="height: 100%; overflow-y: auto;"></uni-job-chat-ui>
			  </div>
			</div>
			<ng-template #showEmptyContainer>
			  <div class="detail-panel d-flex flex-column align-items-center justify-content-center h-100">
				<div class="no-selection text-center">
				  <div class="building-icon mb-4">
					<img src="uniprep-assets/images/building-icon.png" alt="Building" class="img-fluid">
				  </div>
				  <h4 class="mb-3">No Application Selected</h4>
				  <p class="text-muted">
					Select an application to check your information<br>
					and move forward with your interview
				  </p>
				</div>
			  </div>
			</ng-template>
		  </div>
		</div>
	</div>
  
	<div>
		<p-dialog 
		  header="Filter" 
		  [(visible)]="displayModal" 
		  [modal]="true" 
		  [style]="{width: '80%'}" 
		  [baseZIndex]="10000"
		  [draggable]="false" 
		  [resizable]="false"
		  styleClass="container">
		  
		  <form [formGroup]="filterForm" class="p-3">
			<div class="mb-4">
			  <label class="form-label fw-bold">Search</label>
			  <div class="p-inputgroup">
				<input 
				  type="text" 
				  pInputText 
				  placeholder="Search by Keyword" 
				  class="form-control">
			  </div>
			</div>
			
			<div class="row mb-4">
			  <div class="col-md-4">
				<label class="form-label fw-bold">Position Title</label>
				<div class="p-inputgroup">
				  <input 
					type="text" 
					pInputText 
					formControlName="position" 
					placeholder="Enter position title" 
					class="form-control">
				</div>
			  </div>
			  
			  <div class="col-md-4">
				<label class="form-label fw-bold">Industry <span class="text-danger">(Multi select)</span></label>
				<p-multiSelect 
				  [options]="industries" 
				  formControlName="industry" 
				  defaultLabel="Select industry" 
				  optionLabel="industry_name" 
				  optionValue="id"
				  display="chip"
				  class="w-100">
				</p-multiSelect>
			  </div>
			  
			  <div class="col-md-4">
				<label class="form-label fw-bold">Work Location <span class="text-danger">(Multi select)</span></label>
				<p-multiSelect 
				  [options]="locations" 
				  formControlName="worklocation" 
				  defaultLabel="Select work location" 
				  optionLabel="work_location" 
				  optionValue="id"
				  display="chip"
				  class="w-100">
				</p-multiSelect>
			  </div>
			</div>
			
			<div class="row mb-4">
			  <div class="col-md-4">
				<label class="form-label fw-bold">Work mode <span class="text-danger">(Multi select)</span></label>
				<p-multiSelect 
				  [options]="workModes" 
				  formControlName="work_mode" 
				  defaultLabel="Select work type" 
				  optionLabel="label" 
				  display="chip"
				  class="w-100">
				</p-multiSelect>
			  </div>
			  
			  <div class="col-md-4">
				<label class="form-label fw-bold">Employment Type <span class="text-danger">(Multi select)</span></label>
				<p-multiSelect 
				  [options]="employmentTypes" 
				  formControlName="employment_type" 
				  defaultLabel="Select employment type" 
				  optionLabel="label" 
				  display="chip"
				  class="w-100">
				</p-multiSelect>
			  </div>
			  
			  <div class="col-md-4">
				<label class="form-label fw-bold">Currency display for salaries</label>
				<p-select
				  [options]="currencies" 
				  formControlName="currency" 
				  optionLabel="currency_code" 
				  optionId="id"
				  [filter]="true" 
				  filterBy="label" 
				  class="w-100">
				</p-select>
			  </div>
			</div>
			
			<div class="row mb-4">
			  <div class="col-md-4">
				<label class="form-label fw-bold">Salary offered</label>
				<div class="d-flex w-100 gap-2">
				  <p-select [options]="currencies"
				  styleClass="p-select p-component"
				  optionLabel="currency_code" optionValue="id"
				  placeholder="Select"
				  formControlName="currency"
				  [style]="{ width: '80px' }">
				 </p-select>
				  <div class="flex-grow-1 me-2">
					  <p-inputNumber id="salary"
						  placeholder="Enter your salary/month"
						  styleClass="p-inputtext w-100" [showButtons]="false"
						  class="w-100"
						  formControlName="salary"></p-inputNumber>
				  </div>
			  </div>
			  </div>
			  
			  <div class="col-md-4">
				<label class="form-label fw-bold">Experience Level <span class="text-danger">(Multi select)</span></label>
				<p-multiSelect 
				  [options]="experienceLevels" 
				  formControlName="experienceLevel" 
				  optionLabel="label" 
				  display="chip"
				  class="w-100">
				</p-multiSelect>
			  </div>
			  <div class="col-md-4 h-full mt-auto">
				<button 
				pButton 
				label="Apply Filter" 
				(click)="applyFilter()" 
				class="btn-primary w-100">
			  </button>
			  </div>
			</div>
		  </form>
		  
		  <div class="dialog-footer p-3 d-flex justify-content-center">
			<button 
			  pButton 
			  label="Reset Filter" 
			  (click)="resetFilter()" 
			  class="p-button-text text-primary">
			</button>
		  </div>
		</p-dialog>
	  </div>