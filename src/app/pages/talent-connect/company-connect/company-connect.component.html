<div class="card readingcard h-100">
  <div class="card-header border-0 bg-transparent">
    <div class="row">
      <div class="col-md-12 d-flex gap-2 text-center">
        <div class="backIcon d-md-flex d-none" role="button" routerLink="/pages/talent-connect/list">
          <span class="fa-solid fa-chevron-left"></span>
        </div>
        <div class="select-title d-flex justify-content-between align-items-center">
          <div>
            <h5 class="mb-0" tooltipPosition="top" pTooltip="Questions related to the application process are answered">
              Company Connect<i class="questiontooltip fa-solid fa-circle-question"></i>
            </h5>
          </div>
          <div>
            <button class="how-it-works-button" (click)="openVideoPopup('')">
              How it works?<i class="fa-solid fa-play d-md-block d-none"></i>
            </button>
          </div>
        </div>
          <button type="button" title="Close Popup"
                  class="btn btn-primary btn-lg rounded-3 shadow-sm px-4 mt-2 text-normal"
                  (click)="displayModal = true;">
              Filter&nbsp;&nbsp;<i class="fa-solid fa-caret-down"></i>
          </button>
      </div>
      <!-- <div class="col-md-3 mt-2 text-end desktop justify-content-end d-none d-md-flex"></div> -->
    </div>
    <div class="card-body text-center flex-fill overflow-y-auto">
        <div class="row">
            <div class="d-flex gap-2 justify-content-center">
                <!-- Company Search Button -->
                <button type="button"
                        class="p-2 px-4 mb-4 mt-3 module-button primary-btn active-button"
                        routerLink="/pages/talent-connect/company-connect">
                    Company Search
                </button>

                <!-- Company Tracker Button -->
                <button type="button"
                        class="p-2 px-4 mb-4 mt-3 module-button outlined-btn"
                        routerLink="/pages/talent-connect/company-tracker">
                    Company Tracker
                </button>
            </div>

            <!-- Chips / Badges Section -->
            <div class="d-flex gap-2 justify-content-center">
                <p-tag [style]="{ border: '2px solid var(--border-color)',  color: 'var(--text-color)'}"
                       severity="danger">Total Companies : {{ this.totalCount }}
                </p-tag>
                <p-tag [style]="{ border: '2px solid var(--border-color)',  color: 'var(--text-color)'}"
                       severity="info">Total Jobs : {{ this.totalJob }}
                </p-tag>
                <p-tag [style]="{ border: '2px solid var(--border-color)', color: 'var(--text-color)'}"
                       severity="success">Total Vacancies
                    : {{ this.totalVacancies }}
                </p-tag>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col-12 col-md-4 col-lg-4 mt-2" *ngFor="let company of companyDataList" >
                <div class="card-inside" (click)="onClickCompany(company.id)"
                     style="border-radius: 10px; margin-bottom: 20px; transition: transform 0.3s; border: 1px solid #dddddd;"
                     [style.border]=" company.verified ? '1px solid #FFA500' : '1px solid #dddddd'">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-3">
                                <div style="width: 100%; height: 100%; background-color: #f8f9fa; display: flex;
                                           align-items: center; justify-content: center; border-radius: 5px; border: 1px solid #e9ecef;">
                                    <img src="{{company.company_logo}}" alt="Company Logo" style="max-width: 50px"/>
                                </div>
                            </div>
                            <div class="col-9 text-start">
                                <div class="d-flex justify-content-between text-start">
                                    <div class="d-block">
                                        <div class="fw-bold">{{ company.company_name }}</div>
                                        <p class="text-muted">Founded: {{ company.founded_year || '2019' }}</p>
                                    </div>
                                    <a href="#" style="color: #fda172">
                                        <i class="fas fa-share-alt"></i>
                                    </a>
                                </div>
                                <div class="text-start">
                                    <button class="p-2 rounded-2" [ngClass]="company.shortlisted == 1 ? 'active-shortlist' : 'inActive-shortlist'"
                                            (click)="onClickShortListCompany(company.id)"
                                    [disabled]="company.shortlisted == 1">
                                        {{ company.shortlisted == 1 ? "Shortlisted" : "Shortlist" }}
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row text-start">
                            <!-- First Row -->
                             <hr>
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 job-icon">
                                  <i class="fas fa-briefcase"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Open Jobs</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.jobs}}</div>
                                </div>
                              </div>
                            </div>
                            
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 vacancies-icon">
                                  <i class="fas fa-users"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Open Vacancies</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.vacancies }}</div>
                                </div>
                              </div>
                            </div>
                            <hr>

                            <!-- Second Row -->
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 company-icon">
                                  <i class="fas fa-building"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Company Type</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.type }}</div>
                                </div>
                              </div>
                            </div>
                            
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 size-icon">
                                  <i class="fas fa-users-cog"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Company Size</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.size }}</div>
                                </div>
                              </div>
                            </div>
                            
                            <!-- Third Row -->
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 industry-icon">
                                  <i class="fas fa-industry"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Industry</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.industry_type }}</div>
                                </div>
                              </div>
                            </div>
                            
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 location-icon">
                                  <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Headquarters Location</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.HQ_city }}
                                        , {{ company.HQ_country }}
                                    </div>
                                </div>
                              </div>
                            </div>
                            
                            <!-- Fourth Row -->
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 department-icon">
                                  <i class="fas fa-laptop-code"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Department</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.departments }}</div>
                                </div>
                              </div>
                            </div>
                            
                            <div class="col-6 mb-3">
                              <div class="d-flex align-items-center">
                                <div class="icon-container me-2 work-mode-icon">
                                  <i class="fas fa-map-pin"></i>
                                </div>
                                <div class="info-container">
                                  <div class="info-label">Work mode</div>
                                    <div class="info-value" style="font-size: 0.9rem">{{ company.work_mode }}</div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
        </div>
  </div>
</div>
<div class="card-footer border-0 bg-transparent">
  <div class="card-footer border-0 bg-transparent">
    <div class="row d-flex align-items-center justify-content-between">
      <p-paginator *ngIf="totalCount != 0" [rows]="perPage" [totalRecords]="totalCount"
        [first]="(page - 1) * perPage" (onPageChange)="pageChange($event)"
                   [rowsPerPageOptions]="[50, 100, 300, 500, 1000]"></p-paginator>
    </div>
  </div>
</div>
</div>
  <p-dialog [(visible)]="displayModal" [modal]="true" [style]="{width: '70%'}" [closeOnEscape]="true"
    (onShow)="onDialogOpen()"
    styleClass="filter-modal">
      <ng-template #header>
          <div class="inline-flex items-center justify-center gap-2">
              <span class="font-bold whitespace-nowrap">Filter</span>
          </div>
      </ng-template>
    <div class="container-fluid p-3">
        <form (ngSubmit)="applyFilter()" [formGroup]="companyForm">
        <div class="mb-4">
          <label class="form-label fw-bold">Company Name</label>
            <input class="form-control p-2" formControlName="companyname" pInputText
                   placeholder="Search by company name"/>
        </div>

        <div class="row mb-4">
          <div class="col-md-4">
            <label class="form-label fw-bold">Industry Type</label>
              <p-select [options]="industryTypes" formControlName="industrytype"
                        optionValue="id" optionLabel="industry_name"
                        placeholder="Select your preferred industry" styleClass="w-100"
              [showClear]="true"></p-select>
          </div>

          <div class="col-md-4">
            <label class="form-label fw-bold">Company Size</label>
              <p-select [options]="companySizes" formControlName="companysize" placeholder="Select Company Size"
                        styleClass="w-100"
              [showClear]="true"></p-select>
          </div>

          <div class="col-md-4">
            <label class="form-label fw-bold">Headquarters Location</label>
              <p-select [options]="locations" formControlName="hq" placeholder="Select Headquarters Location"
                        optionValue="city_id" optionLabel="city_name"
                        styleClass="w-100"
              [showClear]="true"></p-select>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-md-4">
            <label class="form-label fw-bold">Global Presence</label>
              <p-select [options]="globalPresence" formControlName="globalpresence" placeholder="Select global presence"
                        optionValue="id" optionLabel="country"
                        styleClass="w-100"
              [showClear]="true"></p-select>
          </div>

          <div class="col-md-4">
            <label class="form-label fw-bold">Year Founded</label>
              <p-select [options]="foundedYears" formControlName="foundedyear" placeholder="Select founded year"
                        styleClass="w-100"
              [showClear]="true"></p-select>
          </div>

          <div class="col-md-4">
            <label class="form-label fw-bold">Company Type</label>
              <p-select [options]="companyTypes" formControlName="companytype"
                        optionLabel="type" optionValue="id" placeholder="Select company type"
                        styleClass="w-100"
              [showClear]="true"></p-select>
          </div>
        </div>
      </form>
    </div>

    <ng-template  #footer>
        <div class="d-grid gap-2 col-12 mx-auto">
            <button type="submit" class="btn btn-dark w-100 block"
          style="background-color: var(--uniprep-primary); border: none">Apply Filter</button>
            <button class="btn btn-outline-dark w-100" (click)="clearFilter()"
          style="background-color: white; border-radius: 8px; color: var(--uniprep-primary); border: none"
          type="button">Reset Filter</button>
      </div>
    </ng-template>
  </p-dialog>
