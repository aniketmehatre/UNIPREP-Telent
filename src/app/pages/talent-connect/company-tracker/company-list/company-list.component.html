<div class="card h-100 bg-white">
	<div class="card-header bg-transparent">
		<div class="d-flex justify-content-between align-items-center">
			<h4 class="m-0">All</h4>
			<span class="text-muted">Total Companies : {{ companyCount }}</span>
		</div>
	</div>
	<div class="card-body overflow-y-auto p-0">
		<p-tabView [(activeIndex)]="activeIndex" [scrollable]="true" styleClass="p-0" (onChange)="onTabChange($event)">
			<p-tabPanel *ngFor="let tab of tabs" [header]="tab.label" class="p-0">
				<!-- Job 1 -->
				<ng-container *ngFor="let company of companyList">
					<div class="card mb-3 position-relative" role="button" (click)="onClickJobCard(company)">
						<div class="card-body d-flex align-items-center gap-2">
							<div class="w-100 border rounded-2 overflow-hidden" style="max-width: 65px; background-color: white; aspect-ratio: 1">
								<img src="{{ company.company_logo }}" (error)="$event.target.src = '/uniprep-assets/images/job.webp'" class="w-100 h-100" style="object-fit: contain" alt="UNIPREP" />
							</div>
							<div class="job-details text-left">
								<h5 class="job-title mb-1 text-left">{{ company.company_name }}</h5>
								<div class="d-flex align-items-center location mb-2">
									<i class="pi pi-map-marker me-1 text-success"></i>
									<span>{{ company.HQ_city }}, {{ company.HQ_country }}</span>
								</div>
								<span class="status-badge" [ngClass]="getStatusClass(company.status)">{{ company.status }}</span>
							</div>
							<span class="notification-badge position-absolute top-0 right-0" [ngClass]="{ 'bg-secondary-subtle text-white': !(company.notification_count > 0) }">
								{{ company?.notification_count || 0 }}
							</span>
						</div>
					</div>
				</ng-container>
			</p-tabPanel>
		</p-tabView>
	</div>
	<div class="card-footer bg-transparent">
		<div class="pagination-container d-flex justify-content-between align-items-center">
			<button class="btn btn-light" (click)="onBackClick()"><i class="pi pi-chevron-left me-1 fs-6"></i> Back</button>
			<span>Page {{ page }} / {{ totalPage }}</span>
			<button class="btn btn-light" (click)="onNextClick()">Next <i class="pi pi-chevron-right ms-1 fs-6"></i></button>
		</div>
	</div>
</div>
<app-company-filter [openModal]="displayModal" (closeFilter)="displayModal = false; triggerCloseFilter.emit()" (triggerApplyFiler)="applyFilter($event)" (resetFilter)="applyFilter({})" [isListView]="false"></app-company-filter>
