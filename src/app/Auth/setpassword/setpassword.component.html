<div class="bg-image">
  <div class="formdiv">
    <form [formGroup]="setpasswordForm" (ngSubmit)="onSubmit()">
      <ng-container *ngIf="isNotSuccess; else done">
        <h5 class="login-heading mt-3 mb-2">Set new password</h5>
        <label class="signup mb-3"
        >your new password must be different to previously used password.</label
        >
        <label for="floatingInput">Password</label>
        <div class="form-floating mb-3">
          <div class="p-inputgroup">
            <div class="p-inputgroup-addon"><i class="pi pi-lock"></i></div>
            <input
                    type="password"
                    id="floatingInput"
                    formControlName="password"
                    pInputText
                    [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
            />
          </div>
          <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
            <div *ngIf="f.password.errors.required">Password is required</div>
            <div *ngIf="f.password.errors.minlength">
              Password must be at least 8 characters
            </div>
          </div>
        </div>
        <label for="floatingPassword">Confirm Password</label>
        <div class="p-inputgroup">
          <div class="p-inputgroup-addon"><i class="pi pi-lock"></i></div>
          <input
                  type="password"
                  pInputText
                  formControlName="confirmPassword"
                  [ngClass]="{
            'is-invalid': submitted && f.confirmPassword.errors
          }"
          />
        </div>
        <div
                *ngIf="submitted && f.confirmPassword.errors"
                class="invalid-feedback"
        >
          <div *ngIf="f.confirmPassword.hasError('matching')">
            Password and confirm password not match
          </div>
          <div *ngIf="f.confirmPassword.errors.required">
            Confirm Password is required
          </div>
        </div>
        <br />
        <div class="d-grid">
          <button class="p-2 btn btn-primary btn-login text-uppercase fw-bold" type="submit" >
            Reset Password
          </button>
        </div>
      </ng-container>
      <ng-template #done>
        <div>
          <div class="icn mt-3 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" fill="#9bc329" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
          </div>
          <p class="bold">Your account password has been successfully changed.</p>
          <p style="font-size: .8rem;">Please login to unichecker with your new password.</p>
          <button routerLink="/login" class="btn btn-primary w-full" type="button" >
            CONTINUE TO LOGIN
          </button>
        </div>
      </ng-template>
    </form>
  </div>
</div>
